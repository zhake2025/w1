import{c as _,a0 as R,r as l,j as e,B as t,G as W,ac as v,X as J,Y as V,d as i,R as Z,I as y,ak as ee,dF as se,e4 as re,a1 as K,e5 as Q,af as E,_ as N,k as L,m as H,ah as te,a3 as ae,n as O,b2 as S,b3 as D,Q as z,b5 as T,u as oe,A as ne,T as le,b as ie,aj as F,a_ as ce,i as de,ag as G,o as U,f as B,e6 as xe}from"./index-5OteHtpV.js";import X from"./EnhancedConsoleService-B035xCri.js";import{I}from"./InputAdornment-a3_xDuZj.js";import{S as Y}from"./search-Dw_6t9R9.js";import{P as he}from"./play-DO-IE5Ji.js";import{T as pe,a as q}from"./Tabs-CDQ1XREM.js";import{W as ue}from"./wifi-kAu1EE5S.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],ge=_("bug",me);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],$=_("terminal",je),fe=({autoScroll:k=!0})=>{const n=R(),[g,c]=l.useState([]),[m,a]=l.useState({levels:new Set(["log","info","warn","error","debug"]),searchText:"",showTimestamps:!0}),[h,j]=l.useState(""),[d,x]=l.useState([]),[f,b]=l.useState(-1),w=l.useRef(null),r=X.getInstance();l.useEffect(()=>{const s=r.addListener(o=>{c(o)});return c(r.getEntries()),s},[]),l.useEffect(()=>{k&&w.current&&w.current.scrollIntoView({behavior:"smooth"})},[g,k]);const p=()=>{if(!h.trim())return;const s=[...d,h];x(s),b(-1),r.executeCommand(h),j("")},A=s=>{if(s.key==="Enter")p();else if(s.key==="ArrowUp"){if(s.preventDefault(),f<d.length-1){const o=f+1;b(o),j(d[d.length-1-o])}}else if(s.key==="ArrowDown")if(s.preventDefault(),f>0){const o=f-1;b(o),j(d[d.length-1-o])}else f===0&&(b(-1),j(""))},P=s=>{switch(s){case"error":return n.palette.error.main;case"warn":return n.palette.warning.main;case"info":return n.palette.info.main;case"debug":return n.palette.success.main;default:return n.palette.text.primary}},M=s=>{switch(s){case"error":return e.jsx(re,{size:16});case"warn":return e.jsx(se,{size:16});case"info":return e.jsx(ee,{size:16});case"debug":return e.jsx(ge,{size:16});default:return e.jsx($,{size:16})}},C=r.getFilteredEntries(m);return e.jsxs(t,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx(t,{sx:{p:1,borderBottom:1,borderColor:"divider"},children:e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsx(W,{size:"small",placeholder:"过滤控制台输出...",value:m.searchText,onChange:s=>a(o=>({...o,searchText:s.target.value})),InputProps:{startAdornment:e.jsx(I,{position:"start",children:e.jsx(Y,{size:16})})},fullWidth:!0}),e.jsx(t,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:["error","warn","info","log","debug"].map(s=>e.jsx(v,{label:s.toUpperCase(),size:"small",variant:m.levels.has(s)?"filled":"outlined",color:s==="error"?"error":s==="warn"?"warning":"default",onClick:()=>{const o=new Set(m.levels);o.has(s)?o.delete(s):o.add(s),a(u=>({...u,levels:o}))}},s))})]})}),e.jsx(t,{sx:{flexGrow:1,overflow:"auto",bgcolor:n.palette.mode==="dark"?"#1e1e1e":"#fafafa"},children:e.jsxs(J,{dense:!0,sx:{p:0,fontFamily:"monospace"},children:[C.map(s=>e.jsx(V,{sx:{py:.25,px:1,borderBottom:"1px solid",borderColor:"divider","&:hover":{bgcolor:"action.hover"},alignItems:"flex-start"},children:e.jsxs(t,{sx:{display:"flex",alignItems:"flex-start",width:"100%",gap:1},children:[e.jsx(t,{sx:{color:P(s.level),mt:.5},children:M(s.level)}),e.jsxs(t,{sx:{flexGrow:1,minWidth:0},children:[m.showTimestamps&&e.jsx(i,{variant:"caption",sx:{color:"text.secondary",mr:1},children:new Date(s.timestamp).toLocaleTimeString()}),e.jsx(t,{sx:{wordBreak:"break-word",whiteSpace:"pre-wrap",maxHeight:"300px",overflow:"auto",border:s.args.some(o=>{const u=r.formatArg(o);return u.length>200||u.split(`
`).length>5})?"1px solid":"none",borderColor:n.palette.mode==="dark"?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)",borderRadius:"4px",padding:s.args.some(o=>{const u=r.formatArg(o);return u.length>200||u.split(`
`).length>5})?"8px":"0",backgroundColor:s.args.some(o=>{const u=r.formatArg(o);return u.length>200||u.split(`
`).length>5})?n.palette.mode==="dark"?"rgba(255,255,255,0.02)":"rgba(0,0,0,0.02)":"transparent","&::-webkit-scrollbar":{width:"6px",height:"6px"},"&::-webkit-scrollbar-thumb":{backgroundColor:n.palette.mode==="dark"?"rgba(255,255,255,0.4)":"rgba(0,0,0,0.4)",borderRadius:"3px","&:hover":{backgroundColor:n.palette.mode==="dark"?"rgba(255,255,255,0.6)":"rgba(0,0,0,0.6)"}},"&::-webkit-scrollbar-track":{backgroundColor:"transparent"},"&::-webkit-scrollbar-corner":{backgroundColor:"transparent"}},children:s.args.map((o,u)=>e.jsx("span",{style:{marginRight:"8px"},children:r.formatArg(o)},u))}),s.stack&&e.jsx(Z,{in:!0,children:e.jsx(i,{variant:"caption",component:"pre",sx:{color:"text.secondary",fontSize:"0.75rem",mt:.5,whiteSpace:"pre-wrap",wordBreak:"break-word",maxHeight:"200px",overflow:"auto",border:"1px solid",borderColor:n.palette.mode==="dark"?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)",borderRadius:"4px",padding:"8px",backgroundColor:n.palette.mode==="dark"?"rgba(255,255,255,0.02)":"rgba(0,0,0,0.02)","&::-webkit-scrollbar":{width:"6px",height:"6px"},"&::-webkit-scrollbar-thumb":{backgroundColor:n.palette.mode==="dark"?"rgba(255,255,255,0.4)":"rgba(0,0,0,0.4)",borderRadius:"3px","&:hover":{backgroundColor:n.palette.mode==="dark"?"rgba(255,255,255,0.6)":"rgba(0,0,0,0.6)"}},"&::-webkit-scrollbar-track":{backgroundColor:"transparent"},"&::-webkit-scrollbar-corner":{backgroundColor:"transparent"}},children:s.stack})})]})]})},s.id)),e.jsx("div",{ref:w})]})}),e.jsx(t,{sx:{p:1,borderTop:1,borderColor:"divider"},children:e.jsx(W,{size:"small",placeholder:"输入 JavaScript 命令...",value:h,onChange:s=>j(s.target.value),onKeyDown:A,InputProps:{startAdornment:e.jsx(I,{position:"start",children:e.jsx(i,{variant:"body2",sx:{color:"primary.main"},children:">"})}),endAdornment:e.jsx(I,{position:"end",children:e.jsx(y,{size:"small",onClick:p,disabled:!h.trim(),children:e.jsx(he,{size:16})})})},fullWidth:!0,sx:{fontFamily:"monospace"}})})]})},be=()=>{const k=R(),n=K(k.breakpoints.down("md")),[,g]=l.useState([]),[c,m]=l.useState({methods:new Set(["GET","POST","PUT","DELETE","PATCH","HEAD","OPTIONS"]),statuses:new Set(["pending","success","error","cancelled"]),searchText:"",hideDataUrls:!0,onlyErrors:!1}),[a,h]=l.useState(null),[j,d]=l.useState(!1),x=Q.getInstance();l.useEffect(()=>{const r=x.addListener(p=>{g(p)});return g(x.getEntries()),r},[]);const f=x.getFilteredEntries(c),b=r=>{h(r),d(!0)},w=()=>e.jsxs(L,{open:j,onClose:()=>d(!1),maxWidth:"md",fullWidth:!0,fullScreen:n,children:[e.jsx(H,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(te,{size:20}),"网络请求详情",e.jsx(y,{size:"small",onClick:()=>d(!1),sx:{ml:"auto"},children:e.jsx(ae,{size:16})})]})}),e.jsx(O,{children:a&&e.jsxs(t,{children:[e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:2,mb:2},children:[e.jsxs(t,{children:[e.jsx(i,{variant:"subtitle2",children:"请求URL:"}),e.jsx(i,{variant:"body2",sx:{wordBreak:"break-all"},children:a.url})]}),e.jsxs(t,{sx:{display:"flex",gap:2},children:[e.jsxs(t,{children:[e.jsx(i,{variant:"subtitle2",children:"请求方法:"}),e.jsx(v,{label:a.method,size:"small",sx:{bgcolor:x.getMethodColor(a.method),color:"white"}})]}),e.jsxs(t,{children:[e.jsx(i,{variant:"subtitle2",children:"状态:"}),e.jsx(v,{label:a.statusCode||a.status,size:"small",color:a.status==="success"?"success":a.status==="error"?"error":"default"})]}),a.duration&&e.jsxs(t,{children:[e.jsx(i,{variant:"subtitle2",children:"耗时:"}),e.jsx(i,{variant:"body2",children:x.formatDuration(a.duration)})]})]})]}),e.jsxs(S,{children:[e.jsx(D,{expandIcon:e.jsx(z,{size:16}),children:e.jsx(i,{children:"请求头"})}),e.jsx(T,{children:e.jsx("pre",{style:{fontSize:"0.875rem",margin:0,whiteSpace:"pre-wrap"},children:JSON.stringify(a.requestHeaders,null,2)})})]}),a.requestPayload&&e.jsxs(S,{children:[e.jsx(D,{expandIcon:e.jsx(z,{size:16}),children:e.jsx(i,{children:"请求体"})}),e.jsx(T,{children:e.jsx("pre",{style:{fontSize:"0.875rem",margin:0,whiteSpace:"pre-wrap"},children:typeof a.requestPayload=="string"?a.requestPayload:JSON.stringify(a.requestPayload,null,2)})})]}),e.jsxs(S,{children:[e.jsx(D,{expandIcon:e.jsx(z,{size:16}),children:e.jsx(i,{children:"响应头"})}),e.jsx(T,{children:e.jsx("pre",{style:{fontSize:"0.875rem",margin:0,whiteSpace:"pre-wrap"},children:JSON.stringify(a.responseHeaders,null,2)})})]}),a.responseData&&e.jsxs(S,{children:[e.jsx(D,{expandIcon:e.jsx(z,{size:16}),children:e.jsx(i,{children:"响应体"})}),e.jsx(T,{children:e.jsx("pre",{style:{fontSize:"0.875rem",margin:0,whiteSpace:"pre-wrap"},children:typeof a.responseData=="string"?a.responseData:JSON.stringify(a.responseData,null,2)})})]})]})})]});return e.jsxs(t,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx(t,{sx:{p:1,borderBottom:1,borderColor:"divider"},children:e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsx(W,{size:"small",placeholder:"过滤网络请求...",value:c.searchText,onChange:r=>m(p=>({...p,searchText:r.target.value})),InputProps:{startAdornment:e.jsx(I,{position:"start",children:e.jsx(Y,{size:16})})},fullWidth:!0}),e.jsxs(t,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e.jsx(E,{control:e.jsx(N,{size:"small",checked:c.onlyErrors,onChange:r=>m(p=>({...p,onlyErrors:r.target.checked}))}),label:"仅错误"}),e.jsx(E,{control:e.jsx(N,{size:"small",checked:!c.hideDataUrls,onChange:r=>m(p=>({...p,hideDataUrls:!r.target.checked}))}),label:"Data URLs"})]})]})}),e.jsx(t,{sx:{flexGrow:1,overflow:"auto"},children:e.jsx(J,{dense:!0,sx:{p:0},children:f.map(r=>e.jsx(V,{sx:{py:1,px:2,borderBottom:"1px solid",borderColor:"divider","&:hover":{bgcolor:"action.hover"},cursor:"pointer"},onClick:()=>b(r),children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",width:"100%",gap:1},children:[e.jsx(v,{label:r.method,size:"small",sx:{bgcolor:x.getMethodColor(r.method),color:"white",fontWeight:"bold",minWidth:"60px"}}),e.jsx(v,{label:r.statusCode||r.status,size:"small",color:r.status==="success"?"success":r.status==="error"?"error":"default"}),e.jsx(t,{sx:{flexGrow:1,minWidth:0,mx:1},children:e.jsx(i,{variant:"body2",sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r.url})}),e.jsxs(t,{sx:{display:"flex",gap:2,minWidth:"fit-content"},children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:r.duration?x.formatDuration(r.duration):"-"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:r.responseSize?x.formatSize(r.responseSize):"-"})]})]})},r.id))})}),w()]})},ze=()=>{const k=oe(),n=R(),g=K(n.breakpoints.down("md")),[c,m]=l.useState(0),[a,h]=l.useState(!1),[j,d]=l.useState(!1),[x,f]=l.useState(!0),[b,w]=l.useState(!1),r=X.getInstance(),p=Q.getInstance(),A=(C,s)=>{m(s)},P=()=>{k(-1)},M=()=>{c===0?r.clear():c===1&&p.clear(),h(!1)};return e.jsxs(t,{sx:{display:"flex",flexDirection:"column",height:"100vh"},children:[e.jsx(ne,{position:"static",elevation:1,children:e.jsxs(le,{variant:g?"dense":"regular",children:[e.jsx(y,{edge:"start",color:"inherit",onClick:P,"aria-label":"返回",children:e.jsx(ie,{})}),e.jsx(i,{variant:"h6",component:"div",sx:{flexGrow:1},children:"开发者工具"}),e.jsx(F,{title:"设置",children:e.jsx(y,{color:"inherit",onClick:()=>d(!0),children:e.jsx(ce,{})})}),e.jsx(F,{title:"清除",children:e.jsx(y,{color:"inherit",onClick:()=>h(!0),children:e.jsx(de,{})})})]})}),e.jsxs(pe,{value:c,onChange:A,variant:g?"fullWidth":"standard",sx:{borderBottom:1,borderColor:"divider"},children:[e.jsx(q,{icon:e.jsx($,{}),label:"控制台",iconPosition:"start",sx:{minHeight:g?48:64}}),e.jsx(q,{icon:e.jsx(ue,{}),label:"网络",iconPosition:"start",sx:{minHeight:g?48:64}})]}),e.jsxs(t,{sx:{flexGrow:1,overflow:"hidden"},children:[c===0&&e.jsx(fe,{autoScroll:x}),c===1&&e.jsx(be,{})]}),e.jsxs(L,{open:j,onClose:()=>d(!1),children:[e.jsx(H,{children:"开发者工具设置"}),e.jsx(O,{children:e.jsxs(t,{sx:{pt:1,display:"flex",flexDirection:"column",gap:1},children:[e.jsx(E,{control:e.jsx(G,{checked:x,onChange:C=>f(C.target.checked)}),label:"自动滚动到底部"}),e.jsx(E,{control:e.jsx(G,{checked:b,onChange:C=>w(C.target.checked)}),label:"保留日志"})]})}),e.jsx(U,{children:e.jsx(B,{onClick:()=>d(!1),children:"关闭"})})]}),e.jsxs(L,{open:a,onClose:()=>h(!1),children:[e.jsx(H,{children:"确认清除"}),e.jsx(O,{children:e.jsxs(xe,{children:["确定要清除所有",c===0?"控制台日志":"网络记录","吗？此操作无法撤销。"]})}),e.jsxs(U,{children:[e.jsx(B,{onClick:()=>h(!1),children:"取消"}),e.jsx(B,{onClick:M,color:"error",children:"清除"})]})]})]})};export{ze as default};
