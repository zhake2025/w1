import{c as G,u as U,a6 as V,bn as M,r as c,j as e,B as h,a as o,A as X,T as Z,I as W,b as Q,d as t,f as P,P as B,e as I,X as R,a5 as b,Z as m,a_ as ee,bw as C,Y as D,bk as re,k as ae,m as oe,n as te,G as se,H as le,J as ie,S as ne,K as de,o as ce,dH as xe,dI as pe,dJ as ge}from"./index-5OteHtpV.js";import{D as he,C as be,P as me}from"./dnd.esm-BowJlf5S.js";import{P as T}from"./plus-CNFnFWu4.js";import{L as u}from"./ListItemButton-B_D_P2EP.js";import{G as ue}from"./grip-vertical-B-eGjNfY.js";import{L as j}from"./ListItemAvatar-Tzweey2j.js";import{L as je}from"./ListSubheader-Cn05qfee.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],ve=G("align-left",ye);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],ke=G("list",fe);function Se(s,n,x){const l=Array.from(s),[y]=l.splice(n,1);return l.splice(x,0,y),l}const Ee=()=>{const s=U(),n=V(),x=M(r=>r.settings.providers),l=M(r=>r.settings.modelSelectorStyle),[y,w]=c.useState(!1),[H,A]=c.useState(!1),[z,E]=c.useState(null),[p,v]=c.useState(""),[L,f]=c.useState(""),O=()=>{s("/settings")},F=()=>{s("/settings/add-provider")},N=r=>{y||s(`/settings/model-provider/${r}`)},_=()=>{n(pe(l==="dialog"?"dropdown":"dialog"))},$=r=>{if(w(!1),!r.destination)return;const a=r.source.index,g=r.destination.index;if(a===g)return;const i=Se(x,a,g);n(xe(i))},q=()=>{w(!0)},J=(r,a)=>{a.stopPropagation(),E(r),v(r.name),f(r.providerType||""),A(!0)},Y=()=>{z&&p.trim()&&(n(ge({id:z.id,updates:{name:p.trim(),providerType:L}})),k())},k=()=>{A(!1),E(null),v(""),f("")},K=[{value:"openai",label:"OpenAI"},{value:"openai-response",label:"OpenAI (Responses API)"},{value:"anthropic",label:"Anthropic"},{value:"deepseek",label:"DeepSeek"},{value:"zhipu",label:"智谱AI"},{value:"google",label:"Google"},{value:"azure-openai",label:"Azure OpenAI"},{value:"siliconflow",label:"SiliconFlow"},{value:"volcengine",label:"火山引擎"},{value:"grok",label:"Grok"},{value:"custom",label:"自定义"}];return e.jsxs(h,{sx:{flexGrow:1,display:"flex",flexDirection:"column",height:"100vh",bgcolor:r=>r.palette.mode==="light"?o(r.palette.primary.main,.02):o(r.palette.background.default,.9)},children:[e.jsx(X,{position:"fixed",elevation:0,sx:{zIndex:r=>r.zIndex.drawer+1,bgcolor:"background.paper",color:"text.primary",borderBottom:1,borderColor:"divider",backdropFilter:"blur(8px)"},children:e.jsxs(Z,{children:[e.jsx(W,{edge:"start",color:"inherit",onClick:O,"aria-label":"back",sx:{color:r=>r.palette.primary.main},children:e.jsx(Q,{})}),e.jsx(t,{variant:"h6",component:"div",sx:{flexGrow:1,fontWeight:600,backgroundImage:"linear-gradient(90deg, #9333EA, #754AB4)",backgroundClip:"text",color:"transparent"},children:"模型设置"}),e.jsx(P,{startIcon:e.jsx(T,{}),onClick:F,sx:{bgcolor:r=>o(r.palette.primary.main,.1),color:"primary.main","&:hover":{bgcolor:r=>o(r.palette.primary.main,.2)},borderRadius:2},children:"添加"})]})}),e.jsxs(h,{sx:{flexGrow:1,overflowY:"auto",p:2,mt:8,"&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0,0,0,0.1)",borderRadius:"3px"}},children:[e.jsxs(B,{elevation:0,sx:{mb:2,borderRadius:2,border:"1px solid",borderColor:"divider",overflow:"hidden",bgcolor:"background.paper",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},children:[e.jsxs(h,{sx:{p:2,bgcolor:"rgba(0,0,0,0.01)"},children:[e.jsx(t,{variant:"subtitle1",sx:{fontWeight:600},children:"模型服务商"}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"您可以配置多个模型服务商，点击对应的服务商进行设置和管理"})]}),e.jsx(I,{}),e.jsx(he,{onDragStart:q,onDragEnd:$,children:e.jsx(be,{droppableId:"providers-list",children:r=>e.jsxs(R,{disablePadding:!0,ref:r.innerRef,...r.droppableProps,children:[x.map((a,g)=>e.jsx(me,{draggableId:a.id,index:g,children:(i,S)=>e.jsxs(u,{ref:i.innerRef,...i.draggableProps,onClick:()=>N(a.id),sx:{transition:"all 0.2s",transform:S.isDragging?"rotate(5deg)":"none",boxShadow:S.isDragging?"0 8px 24px rgba(0,0,0,0.15)":"none",bgcolor:S.isDragging?"background.paper":"transparent","&:hover":{bgcolor:d=>o(d.palette.primary.main,.05)},...i.draggableProps.style},children:[e.jsx(h,{...i.dragHandleProps,sx:{display:"flex",alignItems:"center",mr:1,cursor:"grab","&:active":{cursor:"grabbing"},opacity:.6,"&:hover":{opacity:1}},children:e.jsx(ue,{fontSize:"small"})}),e.jsx(j,{children:e.jsx(b,{sx:{bgcolor:a.color||"#8e24aa",boxShadow:"0 2px 6px rgba(0,0,0,0.05)"},children:a.avatar||a.name.charAt(0).toUpperCase()})}),e.jsx(m,{primary:e.jsx(t,{sx:{fontWeight:600,color:"text.primary"},children:a.name}),secondary:e.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[e.jsx(t,{component:"span",variant:"body2",sx:{mr:1,color:a.isEnabled?"success.main":"text.disabled",fontWeight:500},children:a.isEnabled?"已启用":"已禁用"}),a.models.length>0&&e.jsxs(t,{component:"span",variant:"body2",color:"text.secondary",children:[a.models.length," 个模型"]})]})}),e.jsx(W,{size:"small",onClick:d=>J(a,d),sx:{mr:1,color:"text.secondary","&:hover":{color:"primary.main",bgcolor:d=>o(d.palette.primary.main,.1)}},children:e.jsx(ee,{size:16})}),e.jsx(C,{size:20,style:{color:"rgba(79, 70, 229, 0.5)"}})]})},a.id)),r.placeholder]})})})]}),e.jsx(B,{elevation:0,sx:{mb:2,borderRadius:2,border:"1px solid",borderColor:"divider",overflow:"hidden",bgcolor:"background.paper",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},children:e.jsxs(R,{subheader:e.jsx(je,{component:"div",sx:{bgcolor:"rgba(0,0,0,0.01)",py:1,fontWeight:600,color:"text.primary"},children:"推荐操作"}),children:[e.jsx(D,{disablePadding:!0,children:e.jsxs(u,{onClick:()=>s("/settings/topic-naming-settings"),sx:{transition:"all 0.2s","&:hover":{bgcolor:r=>o(r.palette.primary.main,.05)}},children:[e.jsx(j,{children:e.jsx(b,{sx:{bgcolor:o("#4f46e5",.12),color:"#4f46e5",boxShadow:"0 2px 6px rgba(0,0,0,0.05)"},children:e.jsx(re,{})})}),e.jsx(m,{primary:e.jsx(t,{sx:{fontWeight:600,color:"text.primary"},children:"话题命名设置"}),secondary:"设置话题自动命名的模型和选项"}),e.jsx(C,{size:20,style:{color:"var(--mui-palette-text-secondary)"}})]})}),e.jsx(I,{variant:"inset",component:"li",sx:{ml:0}}),e.jsx(D,{disablePadding:!0,children:e.jsxs(u,{onClick:_,sx:{transition:"all 0.2s","&:hover":{bgcolor:r=>o(r.palette.primary.main,.05)}},children:[e.jsx(j,{children:e.jsx(b,{sx:{bgcolor:o("#06b6d4",.12),color:"#06b6d4",boxShadow:"0 2px 6px rgba(0,0,0,0.05)"},children:l==="dialog"?e.jsx(ke,{}):e.jsx(ve,{})})}),e.jsx(m,{primary:e.jsx(t,{sx:{fontWeight:600,color:"text.primary"},children:"模型选择器样式"}),secondary:l==="dialog"?"当前：弹窗式选择器（点击切换为下拉式）":"当前：下拉式选择器（点击切换为弹窗式）"})]})}),e.jsx(I,{variant:"inset",component:"li",sx:{ml:0}}),e.jsx(D,{disablePadding:!0,children:e.jsxs(u,{onClick:()=>s("/settings/add-provider"),sx:{transition:"all 0.2s","&:hover":{bgcolor:r=>o(r.palette.primary.main,.05)}},children:[e.jsx(j,{children:e.jsx(b,{sx:{bgcolor:o("#9333ea",.12),color:"#9333ea",boxShadow:"0 2px 6px rgba(0,0,0,0.05)"},children:e.jsx(T,{})})}),e.jsx(m,{primary:e.jsx(t,{sx:{fontWeight:600,color:"text.primary"},children:"添加模型服务商"}),secondary:"设置新的模型服务商"}),e.jsx(C,{size:20,style:{color:"var(--mui-palette-text-secondary)"}})]})})]})})]}),e.jsxs(ae,{open:H,onClose:k,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[e.jsx(oe,{sx:{fontWeight:600,backgroundImage:"linear-gradient(90deg, #9333EA, #754AB4)",backgroundClip:"text",color:"transparent"},children:"编辑供应商"}),e.jsxs(te,{sx:{pt:2},children:[e.jsx(se,{autoFocus:!0,margin:"dense",label:"供应商名称",placeholder:"例如: 我的智谱AI",type:"text",fullWidth:!0,variant:"outlined",value:p,onChange:r=>v(r.target.value),sx:{mb:2}}),e.jsxs(le,{fullWidth:!0,variant:"outlined",children:[e.jsx(ie,{children:"供应商类型"}),e.jsx(ne,{value:L,onChange:r=>f(r.target.value),label:"供应商类型",children:K.map(r=>e.jsx(de,{value:r.value,children:r.label},r.value))})]})]}),e.jsxs(ce,{sx:{p:2},children:[e.jsx(P,{onClick:k,children:"取消"}),e.jsx(P,{onClick:Y,disabled:!p.trim(),sx:{bgcolor:r=>o(r.palette.primary.main,.1),color:"primary.main","&:hover":{bgcolor:r=>o(r.palette.primary.main,.2)},borderRadius:2},children:"保存"})]})]})]})};export{Ee as default};
