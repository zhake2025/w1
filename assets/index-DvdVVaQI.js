import{r as h,u as R,j as t,B as f,a as y,A as G,T as W,I as F,b as H,d as X,P as K,a5 as q,bw as N,d0 as O,a_ as L,bk as _,d1 as V,ah as U,D as Y,ak as J}from"./index-BFQp9Otg.js";import{u as Q}from"./useScrollPosition-BkaPv-WZ.js";import{L as Z}from"./ListItemButton-BZRzgQUG.js";import{S as $}from"./sliders-vertical-BoTXgHOU.js";import{W as tt}from"./wand-sparkles-wXO-UtLx.js";import{G as et}from"./git-branch-BRug6AQj.js";import{K as M}from"./keyboard-iw5dbNtd.js";import{F as st}from"./folder-BBx9XbIr.js";import{B as it}from"./book-open-CqimO3US.js";import{M as ot}from"./mic-rpMutp9Z.js";import{P as rt}from"./puzzle-DQhRmo7Z.js";const at=(v={})=>{const{onSwipeRight:u,onSwipeLeft:g,onSwipeProgress:r,threshold:d=50,velocityThreshold:b=.3,preventDefaultOnSwipe:w=!1,enabled:n=!0,edgeThreshold:s=50,enableEdgeDetection:a=!1}=v,i=h.useRef({startX:0,startY:0,startTime:0,isTracking:!1,currentX:0,currentY:0}),[C,I]=h.useState(!1),x=h.useCallback(()=>{i.current={startX:0,startY:0,startTime:0,isTracking:!1,currentX:0,currentY:0},I(!1)},[]),S=h.useCallback(e=>{if(!n)return;const o=e.touches[0],p=Date.now();i.current={startX:o.clientX,startY:o.clientY,startTime:p,isTracking:!0,currentX:o.clientX,currentY:o.clientY},I(!0)},[n,a,s]),j=h.useCallback(e=>{if(!n||!i.current.isTracking)return;const o=e.touches[0],p=i.current;p.currentX=o.clientX,p.currentY=o.clientY;const c=o.clientX-p.startX,l=o.clientY-p.startY;if(!(Math.abs(l)>Math.abs(c))){if(r&&Math.abs(c)>10){let z=!0;if(a){const m=p.startX<=s;z=c>0&&m||c<0}if(z){const E=Math.min(Math.abs(c),d*2)/d*50,m=c>0?"right":"left";r(E,m)}}w&&Math.abs(c)>d/2&&e.preventDefault()}},[n,d,w,r,a,s]),k=h.useCallback(e=>{if(!n||!i.current.isTracking)return;const o=i.current,c=Date.now()-o.startTime,l=o.currentX-o.startX,z=o.currentY-o.startY,E=Math.abs(l)/c,m=Math.abs(l)>Math.abs(z),B=Math.abs(l)>d,D=E>b;if(m&&(B||D))if(a){const P=o.startX<=s;l>0&&u&&P?u():l<0&&g&&g()}else l>0&&u?u():l<0&&g&&g();r&&r(0,"right"),x()},[n,d,b,u,g,r,a,s,x]),T=h.useCallback(()=>{r&&r(0,"right"),x()},[x,r]),A=h.useCallback(e=>{if(!(!e||!n))return e.addEventListener("touchstart",S,{passive:!1}),e.addEventListener("touchmove",j,{passive:!1}),e.addEventListener("touchend",k,{passive:!0}),e.addEventListener("touchcancel",T,{passive:!0}),()=>{e.removeEventListener("touchstart",S),e.removeEventListener("touchmove",j),e.removeEventListener("touchend",k),e.removeEventListener("touchcancel",T)}},[n,S,j,k,T]);return{swipeHandlers:{onTouchStart:e=>{S(e.nativeEvent)},onTouchMove:e=>{j(e.nativeEvent)},onTouchEnd:e=>{k(e.nativeEvent)},onTouchCancel:()=>{T()}},bindSwipeEvents:A,isSwipeActive:C,resetSwipeState:x}},wt=()=>{const v=R(),{containerRef:u,handleScroll:g}=Q("settings-main",{autoRestore:!0,restoreDelay:100}),r=()=>{["scroll:settings-main","scroll:settings-appearance","scroll:settings-chat-interface","scroll:settings-behavior","scroll:settings-top-toolbar"].forEach(a=>{try{localStorage.removeItem(a)}catch(i){console.error("清理滚动位置缓存失败:",i)}}),v("/chat")},{swipeHandlers:d}=at({onSwipeRight:r,threshold:100,velocityThreshold:.3,enabled:!0,enableEdgeDetection:!0,edgeThreshold:50}),b={shortcuts:!1,features:!1},w=s=>{const a=s.split("/").pop();a&&b[a]===!1||v(s)},n=[{title:"基本设置",items:[{id:"appearance",title:"外观",description:"主题、字体大小和语言设置",icon:t.jsx(O,{size:18}),path:"/settings/appearance",color:"#6366f1"},{id:"behavior",title:"行为",description:"消息发送和通知设置",icon:t.jsx(L,{size:18}),path:"/settings/behavior",color:"#8b5cf6"}]},{title:"模型服务",items:[{id:"default-model",title:"配置模型",description:"管理AI模型和API密钥",icon:t.jsx(_,{size:18}),path:"/settings/default-model",color:"#ec4899"},{id:"topic-naming-settings",title:"话题命名设置",description:"配置话题自动命名功能",icon:t.jsx($,{size:18}),path:"/settings/topic-naming-settings",color:"#4f46e5"},{id:"agent-prompts",title:"智能体提示词集合",description:"浏览和使用内置的丰富提示词模板",icon:t.jsx(tt,{size:18}),path:"/settings/agent-prompts",color:"#0ea5e9"},{id:"ai-debate",title:"AI辩论设置",description:"配置AI互相辩论讨论功能",icon:t.jsx(V,{size:18}),path:"/settings/ai-debate",color:"#e11d48"},{id:"model-combo",title:"模型组合",description:"创建和管理多模型组合",icon:t.jsx(et,{size:18}),path:"/settings/model-combo",color:"#f43f5e"},{id:"web-search",title:"网络搜索",description:"配置网络搜索和相关服务",icon:t.jsx(U,{size:18}),path:"/settings/web-search",color:"#3b82f6"},{id:"mcp-server",title:"MCP 服务器",description:"高级服务器配置",icon:t.jsx(L,{size:18}),path:"/settings/mcp-server",color:"#10b981"}]},{title:"快捷方式",items:[{id:"shortcuts",title:"快捷助手",description:"自定义键盘快捷键",icon:t.jsx(M,{size:18}),path:"/settings/shortcuts",color:"#f59e0b"},{id:"quick-phrases",title:"快捷短语",description:"创建常用短语模板",icon:t.jsx(M,{size:18}),path:"/settings/quick-phrases",color:"#f97316"}]},{title:"其他设置",items:[{id:"workspace-settings",title:"工作区管理",description:"创建和管理文件工作区",icon:t.jsx(st,{size:18}),path:"/settings/workspace",color:"#f59e0b"},{id:"knowledge-settings",title:"知识库设置",description:"管理知识库配置和嵌入模型",icon:t.jsx(it,{size:18}),path:"/settings/knowledge",color:"#059669"},{id:"data-settings",title:"数据设置",description:"管理数据存储和隐私选项",icon:t.jsx(Y,{size:18}),path:"/settings/data",color:"#0ea5e9"},{id:"notion-settings",title:"Notion 集成",description:"配置Notion数据库导出设置",icon:t.jsx(Y,{size:18}),path:"/settings/notion",color:"#6366f1"},{id:"voice-settings",title:"语音功能",description:"语音识别和文本转语音设置",icon:t.jsx(ot,{size:18}),path:"/settings/voice",color:"#8b5cf6"},{id:"features",title:"功能模块",description:"启用或禁用应用功能",icon:t.jsx(rt,{size:18}),path:"/settings/features",color:"#22c55e"},{id:"about",title:"关于我们",description:"应用信息和技术支持",icon:t.jsx(J,{size:18}),path:"/settings/about",color:"#64748b"}]}];return t.jsxs(f,{...d,sx:{flexGrow:1,display:"flex",flexDirection:"column",height:"100vh",bgcolor:s=>s.palette.mode==="light"?y(s.palette.primary.main,.02):y(s.palette.background.default,.9)},children:[t.jsx(G,{position:"fixed",elevation:0,sx:{zIndex:s=>s.zIndex.drawer+1,bgcolor:"background.paper",color:"text.primary",borderBottom:1,borderColor:"divider",backdropFilter:"blur(8px)"},children:t.jsxs(W,{children:[t.jsx(F,{edge:"start",onClick:r,"aria-label":"back",sx:{color:s=>s.palette.primary.main},children:t.jsx(H,{})}),t.jsx(X,{variant:"h6",component:"div",sx:{flexGrow:1,fontWeight:600,backgroundImage:"linear-gradient(90deg, #9333EA, #754AB4)",backgroundClip:"text",color:"transparent"},children:"设置"})]})}),t.jsx(f,{ref:u,onScroll:g,sx:{flexGrow:1,overflow:"auto",px:2,py:2,mt:8,"&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0,0,0,0.1)",borderRadius:"3px"}},children:n.map((s,a)=>t.jsxs(f,{sx:{mb:2.5},children:[t.jsx(X,{variant:"subtitle1",sx:{px:.5,mb:1,fontSize:"0.8rem",fontWeight:600,color:i=>i.palette.mode==="light"?"#475569":"#94A3B8",letterSpacing:"0.05em",textTransform:"uppercase"},children:s.title}),t.jsx(f,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)"},gap:1.5},children:s.items.map(i=>t.jsx(K,{elevation:0,sx:{borderRadius:1.5,overflow:"hidden",border:"1px solid",borderColor:"divider",transition:"all 0.2s ease-in-out",bgcolor:"background.paper",boxShadow:"0 1px 3px rgba(0,0,0,0.02)",minHeight:"72px","&:hover":{transform:"translateY(-1px)",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",borderColor:C=>y(C.palette.primary.main,.3)}},children:t.jsx(Z,{onClick:()=>w(i.path),disabled:b[i.id]===!1,sx:{p:0,height:"100%","&:hover":{bgcolor:"transparent"}},children:t.jsxs(f,{sx:{display:"flex",alignItems:"center",width:"100%",p:1.5},children:[t.jsx(q,{sx:{bgcolor:y(i.color,.12),color:i.color,mr:1.5,width:36,height:36,boxShadow:"0 2px 6px rgba(0,0,0,0.05)"},children:i.icon}),t.jsxs(f,{sx:{flex:1},children:[t.jsx(X,{variant:"subtitle2",sx:{fontWeight:600,mb:.3,color:"text.primary",fontSize:"0.9rem"},children:i.title}),t.jsx(X,{variant:"body2",sx:{color:"text.secondary",fontSize:"0.75rem",display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden"},children:i.description})]}),t.jsx(N,{size:16,style:{color:"#1976d2",opacity:.5,marginLeft:6}})]})})},i.id))})]},a))})]})};export{wt as default};
