import{u as y,a6 as w,r as c,j as e,B as i,a as l,A as C,T as S,I as z,b as B,d as n,P as O,a5 as G,G as D,H as R,J as T,S as E,K as M,f as h,a7 as W,a8 as F}from"./index-Bp4oiTTd.js";const b=[{value:"openai",label:"OpenAI"},{value:"openai-response",label:"OpenAI (Responses API) - 新版API"},{value:"openai-aisdk",label:"OpenAI (AI SDK) - 流式优化"},{value:"azure-openai",label:"Azure OpenAI"},{value:"gemini",label:"Gemini"},{value:"anthropic",label:"Anthropic"},{value:"grok",label:"xAI (Grok)"},{value:"deepseek",label:"DeepSeek"},{value:"zhipu",label:"智谱AI"},{value:"siliconflow",label:"硅基流动 (SiliconFlow)"},{value:"volcengine",label:"火山引擎"},{value:"custom",label:"其他"}],U=()=>{const d=y(),m=w(),[t,v]=c.useState(""),[r,g]=c.useState(""),[u,p]=c.useState(""),x=()=>{d("/settings/default-model")},A=a=>{const o=a.target.value;if(g(o),o==="custom")t&&p(t.charAt(0).toUpperCase());else{const s=b.find(P=>P.value===o);s&&p(s.label.charAt(0).toUpperCase())}},f=a=>{const o=a.target.value;v(o),r==="custom"&&o&&p(o.charAt(0).toUpperCase())},I=a=>{switch(a){case"openai":return"https://api.openai.com/v1";case"openai-response":return"https://api.openai.com/v1";case"openai-aisdk":return"https://api.openai.com/v1";case"azure-openai":return"";case"anthropic":return"https://api.anthropic.com/v1";case"gemini":return"https://generativelanguage.googleapis.com/v1beta";case"grok":return"https://api.x.ai/v1";case"deepseek":return"https://api.deepseek.com";case"zhipu":return"https://open.bigmodel.cn/api/paas/v4/";case"siliconflow":return"https://api.siliconflow.cn/v1";case"volcengine":return"https://ark.cn-beijing.volces.com/api/v3";default:return""}},k=()=>{const a=["#10a37f","#4285f4","#b83280","#8b5cf6","#6366f1","#ef4444","#f59e0b","#22c55e"],o=a[Math.floor(Math.random()*a.length)],s={id:W(),name:t,avatar:u,color:o,isEnabled:!0,apiKey:"",baseUrl:I(r),models:[],providerType:r};m(F(s)),d(`/settings/model-provider/${s.id}`)},j=!t||!r;return e.jsxs(i,{sx:{flexGrow:1,display:"flex",flexDirection:"column",height:"100vh",bgcolor:a=>a.palette.mode==="light"?l(a.palette.primary.main,.02):l(a.palette.background.default,.9)},children:[e.jsx(C,{position:"fixed",elevation:0,sx:{zIndex:a=>a.zIndex.drawer+1,bgcolor:"background.paper",color:"text.primary",borderBottom:1,borderColor:"divider",backdropFilter:"blur(8px)"},children:e.jsxs(S,{children:[e.jsx(z,{edge:"start",onClick:x,"aria-label":"back",sx:{color:a=>a.palette.primary.main},children:e.jsx(B,{size:20})}),e.jsx(n,{variant:"h6",component:"div",sx:{flexGrow:1,fontWeight:600,backgroundImage:"linear-gradient(90deg, #9333EA, #754AB4)",backgroundClip:"text",color:"transparent"},children:"添加提供商"})]})}),e.jsx(i,{sx:{flexGrow:1,overflowY:"auto",p:2,mt:8,"&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0,0,0,0.1)",borderRadius:"3px"}},children:e.jsxs(O,{elevation:0,sx:{p:3,borderRadius:2,border:"1px solid",borderColor:"divider",bgcolor:"background.paper",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",maxWidth:600,mx:"auto"},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",mb:4},children:[e.jsx(G,{sx:{width:64,height:64,bgcolor:"#9333EA",fontSize:"1.7rem",mr:2,boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},children:u||"P"}),e.jsx(n,{variant:"h5",sx:{fontWeight:600,backgroundImage:"linear-gradient(90deg, #9333EA, #754AB4)",backgroundClip:"text",color:"transparent"},children:t||"新提供商"})]}),e.jsx(n,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:600,color:"text.primary",mb:3},children:"提供商信息"}),e.jsxs(i,{sx:{mb:3},children:[e.jsx(n,{variant:"subtitle2",gutterBottom:!0,color:"text.secondary",children:"提供商名称"}),e.jsx(D,{fullWidth:!0,placeholder:"例如 OpenAI",value:t,onChange:f,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})]}),e.jsxs(i,{sx:{mb:4},children:[e.jsx(n,{variant:"subtitle2",gutterBottom:!0,color:"text.secondary",children:"提供商类型"}),e.jsxs(R,{fullWidth:!0,size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:[e.jsx(T,{children:"提供商类型"}),e.jsx(E,{value:r,onChange:A,label:"提供商类型",children:b.map(a=>e.jsx(M,{value:a.value,children:a.label},a.value)).filter(Boolean)})]}),r&&e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mt:1,fontSize:"0.8rem"},children:r==="openai"?"添加OpenAI兼容的API服务":r==="openai-response"?"添加OpenAI Responses API服务（支持最新的响应格式和推理功能）":r==="openai-aisdk"?"添加OpenAI API服务（使用AI SDK，专为浏览器优化，解决流式响应延迟问题）":r==="azure-openai"?"添加Azure OpenAI API服务（需要配置endpoint和apiVersion）":r==="anthropic"?"添加Anthropic Claude API服务":r==="gemini"?"添加Google Gemini API服务":r==="grok"?"添加xAI (Grok) API服务":r==="deepseek"?"添加DeepSeek API服务（使用OpenAI兼容格式）":r==="zhipu"?"添加智谱AI (GLM) API服务（使用OpenAI兼容格式）":r==="siliconflow"?"添加硅基流动 (SiliconFlow) API服务":r==="volcengine"?"添加火山引擎 (豆包/DeepSeek) API服务":"添加自定义API服务"})]}),e.jsxs(i,{sx:{mt:4,display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(h,{variant:"outlined",onClick:x,sx:{borderRadius:2,px:3},children:"取消"}),e.jsx(h,{onClick:k,disabled:j,sx:{bgcolor:a=>l(a.palette.primary.main,.1),color:"primary.main","&:hover":{bgcolor:a=>l(a.palette.primary.main,.2)},borderRadius:2,px:3},children:"下一步"})]})]})})]})};export{U as default};
