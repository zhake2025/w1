import{u as Z,a6 as _,bn as $,r as k,j as e,B as r,a as B,A as Q,T as ee,I as C,b as re,d as s,P as W,H as T,bo as oe,af as P,bp as U,ac as F,i as u,b4 as g,bq as D,e as L,J as se,S as ie,K as R,X as te,Y as ae,a4 as O,Z as ne,br as le,$ as de,bs as I}from"./index-Bp4oiTTd.js";import{D as ce,C as xe,P as be}from"./dnd.esm-taD6gTDW.js";import{C as E}from"./Card-CqCVDSy1.js";import{C as M}from"./CardContent-BsEX79yU.js";import{P as y}from"./plus-DzgKc2iD.js";import{C as pe}from"./camera-NkArBSeE.js";import{V as ge}from"./video-B2DVWIco.js";import{B as he}from"./book-open-DmWp_J3c.js";import{S as me}from"./search-ujF0MOD3.js";import{G as je}from"./grip-vertical-3U_b-469.js";import{E as ue}from"./eye-off-D4qHSTw4.js";const V=[{id:"mcp-tools",icon:g,label:"MCP工具",description:"启用/禁用MCP工具调用功能",color:"rgba(255, 152, 0, 0.8)"},{id:"new-topic",icon:y,label:"新建话题",description:"创建新的对话话题",color:"rgba(76, 175, 80, 0.8)"},{id:"clear-topic",icon:u,label:"清空内容",description:"清空当前话题的所有消息",color:"rgba(33, 150, 243, 0.8)"},{id:"generate-image",icon:pe,label:"生成图片",description:"切换到图像生成模式",color:"rgba(156, 39, 176, 0.8)"},{id:"generate-video",icon:ge,label:"生成视频",description:"切换到视频生成模式",color:"rgba(233, 30, 99, 0.8)"},{id:"knowledge",icon:he,label:"知识库",description:"选择知识库进行搜索",color:"rgba(5, 150, 105, 0.8)"},{id:"web-search",icon:me,label:"网络搜索",description:"启用网络搜索功能",color:"rgba(59, 130, 246, 0.8)"}],Ie=()=>{const A=Z(),b=_(),i=$(o=>o.settings),c=i.theme==="dark"||i.theme==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches,p=i.toolbarDisplayStyle||"both",h=i.toolbarButtons||{order:["mcp-tools","new-topic","clear-topic","generate-image","generate-video","knowledge","web-search"],visibility:{"mcp-tools":!0,"new-topic":!0,"clear-topic":!0,"generate-image":!0,"generate-video":!0,knowledge:!0,"web-search":!0}},[f,S]=k.useState(h.order),[m,w]=k.useState(h.visibility);k.useEffect(()=>{S(h.order),w(h.visibility)},[h]);const G=()=>{A("/settings/appearance")},H=o=>{b(D(o.target.value))},N=o=>{b(de({toolbarDisplayStyle:o.target.value}))},Y=o=>{if(!o.destination)return;const t=o.source.index,l=o.destination.index;if(t===l)return;const x=Array.from(f),[d]=x.splice(t,1);x.splice(l,0,d),S(x),b(I({order:x,visibility:m}))},q=o=>{const t={...m,[o]:!m[o]};w(t),b(I({order:f,visibility:t}))},J=()=>{const o=["mcp-tools","new-topic","clear-topic","generate-image","generate-video","knowledge","web-search"],t={"mcp-tools":!0,"new-topic":!0,"clear-topic":!0,"generate-image":!0,"generate-video":!0,knowledge:!0,"web-search":!0};S(o),w(t),b(I({order:o,visibility:t}))},a=()=>({background:c?"rgba(255, 255, 255, 0.08)":"rgba(255, 255, 255, 0.15)",border:c?"1px solid rgba(255, 255, 255, 0.12)":"1px solid rgba(255, 255, 255, 0.25)",borderRadius:"16px",padding:"8px 14px",backdropFilter:"blur(12px) saturate(120%)",WebkitBackdropFilter:"blur(12px) saturate(120%)",boxShadow:c?"0 4px 16px rgba(0, 0, 0, 0.15), 0 1px 4px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.1)":"0 4px 16px rgba(0, 0, 0, 0.08), 0 1px 4px rgba(0, 0, 0, 0.04), inset 0 1px 0 rgba(255, 255, 255, 0.4)",display:"flex",alignItems:"center",gap:"8px",minHeight:"36px",margin:"0 4px",cursor:"pointer",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)"}),n=()=>({background:"transparent",border:"none",borderRadius:"20px",padding:"6px 12px",display:"flex",alignItems:"center",gap:"6px",minHeight:"32px",margin:"0 2px",cursor:"pointer",transition:"all 0.15s ease","&:hover":{background:c?"rgba(255, 255, 255, 0.06)":"rgba(0, 0, 0, 0.04)"}});return e.jsxs(r,{sx:{flexGrow:1,display:"flex",flexDirection:"column",height:"100vh",bgcolor:o=>o.palette.mode==="light"?B(o.palette.primary.main,.02):B(o.palette.background.default,.9)},children:[e.jsx(Q,{position:"fixed",elevation:0,sx:{zIndex:o=>o.zIndex.drawer+1,bgcolor:"background.paper",color:"text.primary",borderBottom:1,borderColor:"divider",backdropFilter:"blur(8px)"},children:e.jsxs(ee,{children:[e.jsx(C,{edge:"start",color:"inherit",onClick:G,"aria-label":"back",sx:{color:o=>o.palette.primary.main},children:e.jsx(re,{size:24})}),e.jsx(s,{variant:"h6",component:"div",sx:{flexGrow:1,fontWeight:600,backgroundImage:"linear-gradient(90deg, #06b6d4, #0891b2)",backgroundClip:"text",color:"transparent"},children:"输入框工具栏定制"})]})}),e.jsxs(r,{sx:{flexGrow:1,overflowY:"auto",p:2,mt:8,"&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0,0,0,0.1)",borderRadius:"3px"}},children:[e.jsxs(W,{elevation:0,sx:{mb:2,borderRadius:2,border:"1px solid",borderColor:"divider",overflow:"hidden",bgcolor:"background.paper",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},children:[e.jsxs(r,{sx:{p:2,bgcolor:"rgba(0,0,0,0.01)"},children:[e.jsx(s,{variant:"subtitle1",sx:{fontWeight:600},children:"工具栏背景样式"}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"选择输入框工具栏的背景效果，影响新建话题、清空内容等按钮的外观"})]}),e.jsx(r,{sx:{p:3},children:e.jsx(T,{component:"fieldset",fullWidth:!0,children:e.jsxs(oe,{value:i.toolbarStyle||"glassmorphism",onChange:H,sx:{gap:2},children:[e.jsx(E,{variant:"outlined",sx:{cursor:"pointer",transition:"all 0.2s",border:i.toolbarStyle==="glassmorphism"?2:1,borderColor:i.toolbarStyle==="glassmorphism"?"primary.main":"divider","&:hover":{borderColor:"primary.main",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}},onClick:()=>b(D("glassmorphism")),children:e.jsxs(M,{sx:{p:2},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(P,{value:"glassmorphism",control:e.jsx(U,{}),label:e.jsxs(r,{children:[e.jsx(s,{variant:"subtitle2",sx:{fontWeight:600},children:"毛玻璃效果 (推荐)"}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"现代玻璃UI设计，具有模糊背景和立体阴影效果"})]}),sx:{m:0,flex:1}}),i.toolbarStyle==="glassmorphism"&&e.jsx(F,{label:"当前",size:"small",color:"primary"})]}),e.jsxs(r,{sx:{display:"flex",gap:1,p:2,bgcolor:c?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.05)",borderRadius:2,position:"relative",overflow:"hidden"},children:[e.jsxs(r,{sx:a(),children:[e.jsx(y,{size:16}),e.jsx(s,{variant:"body2",sx:{fontSize:"13px",fontWeight:600},children:"新建话题"})]}),e.jsxs(r,{sx:a(),children:[e.jsx(u,{size:16}),e.jsx(s,{variant:"body2",sx:{fontSize:"13px",fontWeight:600},children:"清空内容"})]}),e.jsxs(r,{sx:a(),children:[e.jsx(g,{size:16}),e.jsx(s,{variant:"body2",sx:{fontSize:"13px",fontWeight:600},children:"工具"})]})]})]})}),e.jsx(E,{variant:"outlined",sx:{cursor:"pointer",transition:"all 0.2s",border:i.toolbarStyle==="transparent"?2:1,borderColor:i.toolbarStyle==="transparent"?"primary.main":"divider","&:hover":{borderColor:"primary.main",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}},onClick:()=>b(D("transparent")),children:e.jsxs(M,{sx:{p:2},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(P,{value:"transparent",control:e.jsx(U,{}),label:e.jsxs(r,{children:[e.jsx(s,{variant:"subtitle2",sx:{fontWeight:600},children:"透明效果"}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"简约透明设计，悬停时显示淡色背景"})]}),sx:{m:0,flex:1}}),i.toolbarStyle==="transparent"&&e.jsx(F,{label:"当前",size:"small",color:"primary"})]}),e.jsxs(r,{sx:{display:"flex",gap:1,p:2,bgcolor:c?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.05)",borderRadius:2},children:[e.jsxs(r,{sx:n(),children:[e.jsx(y,{size:16}),e.jsx(s,{variant:"body2",sx:{fontSize:"13px",fontWeight:500},children:"新建话题"})]}),e.jsxs(r,{sx:n(),children:[e.jsx(u,{size:16}),e.jsx(s,{variant:"body2",sx:{fontSize:"13px",fontWeight:500},children:"清空内容"})]}),e.jsxs(r,{sx:n(),children:[e.jsx(g,{size:16}),e.jsx(s,{variant:"body2",sx:{fontSize:"13px",fontWeight:500},children:"工具"})]})]})]})})]})})})]}),e.jsxs(W,{elevation:0,sx:{mb:2,borderRadius:2,border:"1px solid",borderColor:"divider",overflow:"hidden",bgcolor:"background.paper",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},children:[e.jsxs(r,{sx:{p:2,bgcolor:"rgba(0,0,0,0.01)"},children:[e.jsx(s,{variant:"subtitle1",sx:{fontWeight:600},children:"工具栏显示方式"}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"设置工具栏按钮的显示方式，可以选择同时显示图标和文字，或仅显示图标，或仅显示文字"})]}),e.jsx(L,{}),e.jsxs(r,{sx:{p:3},children:[e.jsxs(T,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[e.jsx(se,{children:"工具栏显示样式"}),e.jsxs(ie,{value:p,onChange:N,label:"工具栏显示样式",MenuProps:{disableAutoFocus:!0,disableRestoreFocus:!0},children:[e.jsx(R,{value:"both",children:"图标+文字（默认）"}),e.jsx(R,{value:"icon",children:"仅图标"}),e.jsx(R,{value:"text",children:"仅文字"})]})]}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"设置聊天界面工具栏的显示方式。可以选择同时显示图标和文字，或仅显示图标，或仅显示文字。"}),e.jsxs(r,{sx:{mt:3,p:2,bgcolor:c?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.05)",borderRadius:2,position:"relative",overflow:"hidden"},children:[e.jsx(s,{variant:"body2",sx:{mb:2,fontWeight:600},children:"预览效果："}),e.jsxs(r,{sx:{display:"flex",gap:1},children:[p==="both"&&e.jsxs(e.Fragment,{children:[e.jsxs(r,{sx:i.toolbarStyle==="glassmorphism"?a():n(),children:[e.jsx(y,{size:16}),e.jsx(s,{variant:"body2",sx:{fontSize:"13px",fontWeight:600},children:"新建话题"})]}),e.jsxs(r,{sx:i.toolbarStyle==="glassmorphism"?a():n(),children:[e.jsx(u,{size:16}),e.jsx(s,{variant:"body2",sx:{fontSize:"13px",fontWeight:600},children:"清空内容"})]}),e.jsxs(r,{sx:i.toolbarStyle==="glassmorphism"?a():n(),children:[e.jsx(g,{size:16}),e.jsx(s,{variant:"body2",sx:{fontSize:"13px",fontWeight:600},children:"工具"})]})]}),p==="icon"&&e.jsxs(e.Fragment,{children:[e.jsx(r,{sx:i.toolbarStyle==="glassmorphism"?a():n(),children:e.jsx(y,{size:16})}),e.jsx(r,{sx:i.toolbarStyle==="glassmorphism"?a():n(),children:e.jsx(u,{size:16})}),e.jsx(r,{sx:i.toolbarStyle==="glassmorphism"?a():n(),children:e.jsx(g,{size:16})})]}),p==="text"&&e.jsxs(e.Fragment,{children:[e.jsx(r,{sx:i.toolbarStyle==="glassmorphism"?a():n(),children:e.jsx(s,{variant:"body2",sx:{fontSize:"13px",fontWeight:600},children:"新建话题"})}),e.jsx(r,{sx:i.toolbarStyle==="glassmorphism"?a():n(),children:e.jsx(s,{variant:"body2",sx:{fontSize:"13px",fontWeight:600},children:"清空内容"})}),e.jsx(r,{sx:i.toolbarStyle==="glassmorphism"?a():n(),children:e.jsx(s,{variant:"body2",sx:{fontSize:"13px",fontWeight:600},children:"工具"})})]})]})]})]})]}),e.jsxs(W,{elevation:0,sx:{mb:2,borderRadius:2,border:"1px solid",borderColor:"divider",overflow:"hidden",bgcolor:"background.paper",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},children:[e.jsx(r,{sx:{p:2,bgcolor:"rgba(0,0,0,0.01)"},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[e.jsxs(r,{children:[e.jsx(s,{variant:"subtitle1",sx:{fontWeight:600},children:"工具栏按钮自定义"}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"拖拽调整按钮顺序，点击眼睛图标控制按钮显示/隐藏"})]}),e.jsx(C,{onClick:J,size:"small",sx:{bgcolor:"action.hover","&:hover":{bgcolor:"action.selected"}},children:e.jsx(g,{size:16})})]})}),e.jsx(L,{}),e.jsxs(r,{sx:{p:3,position:"relative"},children:[e.jsx(r,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:1,pointerEvents:"none",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none","&::selection":{background:"transparent"},"& *::selection":{background:"transparent"}}}),e.jsx(ce,{onDragEnd:Y,children:e.jsx(xe,{droppableId:"toolbar-buttons",children:(o,t)=>e.jsxs(te,{ref:o.innerRef,...o.droppableProps,sx:{bgcolor:t.isDraggingOver?"action.hover":"transparent",borderRadius:1,transition:"background-color 0.2s ease",minHeight:200,position:"relative",zIndex:2,userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none","& *":{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},"&::selection":{background:"transparent"},"& *::selection":{background:"transparent"}},children:[f.map((l,x)=>{const d=V.find(j=>j.id===l);if(!d)return null;const K=d.icon,v=m[l];return e.jsx(be,{draggableId:l,index:x,children:(j,z)=>e.jsxs(ae,{ref:j.innerRef,...j.draggableProps,...j.dragHandleProps,sx:{mb:1,bgcolor:z.isDragging?"primary.light":"background.paper",borderRadius:1,border:"1px solid",borderColor:z.isDragging?"primary.main":"divider",transform:z.isDragging?"rotate(2deg)":"none",transition:"all 0.2s ease",opacity:v?1:.5,cursor:"grab","&:active":{cursor:"grabbing"},"&:hover":{borderColor:"primary.main",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}},children:[e.jsx(O,{sx:{minWidth:40},children:e.jsx(je,{size:16,color:"rgba(0,0,0,0.4)"})}),e.jsx(O,{sx:{minWidth:40},children:e.jsx(K,{size:20,color:d.color})}),e.jsx(ne,{primary:e.jsx(s,{variant:"body1",sx:{fontWeight:500},children:d.label}),secondary:d.description,sx:{flex:1}}),e.jsx(C,{edge:"end",onClick:X=>{X.stopPropagation(),q(l)},sx:{color:v?"primary.main":"text.disabled",ml:1,"&:hover":{bgcolor:v?"primary.light":"action.hover"}},children:v?e.jsx(le,{size:18}):e.jsx(ue,{size:18})})]})},l)}),o.placeholder]})})}),e.jsxs(r,{sx:{mt:3},children:[e.jsx(s,{variant:"body2",sx:{mb:2,fontWeight:600},children:"实时预览："}),e.jsx(r,{sx:{display:"flex",gap:1,p:2,bgcolor:c?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.05)",borderRadius:2,flexWrap:"wrap"},children:f.filter(o=>m[o]).map(o=>{const t=V.find(d=>d.id===o);if(!t)return null;const l=t.icon,x=i.toolbarStyle==="glassmorphism"?a():n();return e.jsxs(r,{sx:x,children:[p!=="text"&&e.jsx(l,{size:16,color:t.color}),p!=="icon"&&e.jsx(s,{variant:"body2",sx:{fontSize:"13px",fontWeight:i.toolbarStyle==="glassmorphism"?600:500,ml:p==="both"?.5:0},children:t.label})]},o)})})]})]})]})]})]})};export{Ie as default};
