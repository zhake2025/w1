import{u as T,U as P,V as s,r as m,j as e,B as t,a as u,A as B,T as D,I as R,b as z,d as a,P as c,e as p,f as j,X as E,Y as O,Z as W,_ as A,G,$ as l}from"./index-Bp4oiTTd.js";import{D as L}from"./DialogModelSelector-DMw3Zh2P.js";import"./InputAdornment-DlY_7arK.js";import"./search-ujF0MOD3.js";import"./Tabs-DaoLBDmq.js";import"./check-BtCcYkea.js";const _=()=>{const f=T(),i=P(),v=s(o=>o.settings.defaultModelId),M=s(o=>o.settings.topicNamingModelId),x=s(o=>o.settings.providers),k=s(o=>o.settings.enableTopicNaming),b=s(o=>o.settings.topicNamingPrompt),[w,n]=m.useState(!1),g=m.useMemo(()=>x.filter(o=>o.isEnabled).flatMap(o=>o.models.filter(r=>r.enabled).map(r=>({...r,providerName:o.name}))),[x]),d=g.find(o=>o.id===(M||v))||null,y=()=>{f("/settings")},C=o=>{i(l({topicNamingModelId:o.id})),n(!1)},I=o=>{const r=o.target.checked;i(l({enableTopicNaming:r}))},N=o=>{const r=o.target.value;i(l({topicNamingPrompt:r}))},h=()=>{n(!0)},S=()=>{n(!1)};return e.jsxs(t,{sx:{flexGrow:1,display:"flex",flexDirection:"column",height:"100vh",bgcolor:o=>o.palette.mode==="light"?u(o.palette.primary.main,.02):u(o.palette.background.default,.9)},children:[e.jsx(B,{position:"fixed",elevation:0,sx:{zIndex:o=>o.zIndex.drawer+1,bgcolor:"background.paper",color:"text.primary",borderBottom:1,borderColor:"divider",backdropFilter:"blur(8px)"},children:e.jsxs(D,{children:[e.jsx(R,{edge:"start",color:"inherit",onClick:y,"aria-label":"back",sx:{color:o=>o.palette.primary.main},children:e.jsx(z,{size:20})}),e.jsx(a,{variant:"h6",component:"div",sx:{flexGrow:1,fontWeight:600,backgroundImage:"linear-gradient(90deg, #4f46e5, #8b5cf6)",backgroundClip:"text",color:"transparent"},children:"话题命名设置"})]})}),e.jsxs(t,{sx:{flexGrow:1,overflowY:"auto",p:2,mt:8,"&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0,0,0,0.1)",borderRadius:"3px"}},children:[e.jsxs(c,{elevation:0,sx:{mb:2,borderRadius:2,border:"1px solid",borderColor:"divider",overflow:"hidden",bgcolor:"background.paper",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},children:[e.jsxs(t,{sx:{p:2,bgcolor:"rgba(0,0,0,0.01)"},children:[e.jsx(a,{variant:"subtitle1",sx:{fontWeight:600},children:"话题命名模型"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"选择用于自动为话题生成标题的AI模型"})]}),e.jsx(p,{}),e.jsxs(t,{sx:{p:2,display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(j,{variant:"outlined",onClick:h,size:"small",children:"选择模型"}),e.jsxs(a,{variant:"body2",color:"text.secondary",children:["当前：",d?d.name:"未选择"]}),e.jsx(L,{selectedModel:d,availableModels:g,handleModelSelect:C,handleMenuClick:h,handleMenuClose:S,menuOpen:w})]})]}),e.jsxs(c,{elevation:0,sx:{mb:2,borderRadius:2,border:"1px solid",borderColor:"divider",overflow:"hidden",bgcolor:"background.paper",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},children:[e.jsxs(t,{sx:{p:2,bgcolor:"rgba(0,0,0,0.01)"},children:[e.jsx(a,{variant:"subtitle1",sx:{fontWeight:600},children:"自动命名话题"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"在对话进行3轮后，自动为话题生成标题"})]}),e.jsx(p,{}),e.jsx(E,{disablePadding:!0,children:e.jsxs(O,{children:[e.jsx(W,{primary:"自动命名话题"}),e.jsx(A,{edge:"end",checked:k,onChange:I,inputProps:{"aria-labelledby":"enable-topic-naming-switch"}})]})})]}),e.jsxs(c,{elevation:0,sx:{mb:2,borderRadius:2,border:"1px solid",borderColor:"divider",overflow:"hidden",bgcolor:"background.paper",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},children:[e.jsxs(t,{sx:{p:2,bgcolor:"rgba(0,0,0,0.01)"},children:[e.jsx(a,{variant:"subtitle1",sx:{fontWeight:600},children:"话题命名提示词"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"自定义话题命名时使用的提示词，留空则使用默认提示词"})]}),e.jsx(p,{}),e.jsxs(t,{sx:{p:2},children:[e.jsx(G,{fullWidth:!0,multiline:!0,rows:4,value:b,onChange:N,placeholder:"你是一个话题生成专家。根据对话内容生成一个简洁、精确、具有描述性的标题。标题应简洁，不超过10个字。你只需要返回标题文本，不需要解释或扩展。",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}}),b&&e.jsx(j,{variant:"outlined",size:"small",sx:{mt:1},onClick:()=>i(l({topicNamingPrompt:""})),children:"重置为默认"})]})]})]})]})};export{_ as default};
