import{c as L,e3 as B,ae as w,a6 as E,bn as M,r as x,j as e,P as b,B as a,a as j,d as o,ac as g,I as A,O as I,Q as P,R,e as u,g as G,ak as N,af as v,_ as S,G as W,u as _,A as Q,T as F,b as Y,f as q,bm as H}from"./index-BFQp9Otg.js";import{g as K,a as U,b as $,c as J,s as X}from"./agentPrompts-DfG1P-kc.js";import{C as k}from"./clock-v-5En4kN.js";import{I as Z}from"./InputAdornment-2unSRdg3.js";import{S as ee}from"./search-Bv7nWCFj.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],z=L("map-pin",re);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],V=L("monitor",ae),T="settings",se={theme:"system",thinkingDisplayStyle:"compact",thoughtAutoCollapse:!0,defaultThinkingEffort:"medium",multiModelDisplayStyle:"horizontal",showToolDetails:!0,showCitationDetails:!0,fontSize:16,language:"zh-CN",sendWithEnter:!0,enableNotifications:!0,models:[],providers:[],autoNameTopic:!0,modelSelectorStyle:"dialog",toolbarDisplayStyle:"both",showSystemPromptBubble:!0,showAIDebateButton:!0,showQuickPhraseButton:!0,systemPromptVariables:{enableTimeVariable:!1,enableLocationVariable:!1,customLocation:""},integratedInputButtons:["tools","search"],messageNavigation:"none",isLoading:!1},oe=B({name:"settings",initialState:se,reducers:{setTheme:(l,i)=>{l.theme=i.payload,w(T,l)},updateSettings:(l,i)=>{Object.assign(l,i.payload),w(T,l)},initSettings:(l,i)=>i.payload}}),{setTheme:be,updateSettings:te,initSettings:he}=oe.actions,ie=()=>{const l=E(),i=M(s=>s.settings),[h,p]=x.useState(!1),t=i.systemPromptVariables||{enableTimeVariable:!1,enableLocationVariable:!1,customLocation:"",enableOSVariable:!1},d=s=>{l(te({systemPromptVariables:{...t,...s}}))},m=s=>{d({enableTimeVariable:s})},f=s=>{d({enableLocationVariable:s})},c=s=>{d({customLocation:s})},y=s=>{d({enableOSVariable:s})};return e.jsxs(b,{elevation:0,sx:{mb:2,borderRadius:2,border:"1px solid",borderColor:"divider",overflow:"hidden",bgcolor:"background.paper",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",cursor:"pointer",p:2,bgcolor:s=>j(s.palette.primary.main,.02),"&:hover":{bgcolor:s=>j(s.palette.primary.main,.04)}},onClick:()=>p(!h),children:[e.jsxs(a,{sx:{flexGrow:1},children:[e.jsx(o,{variant:"subtitle1",sx:{fontWeight:600,mb:.5},children:"🔧 系统提示词变量注入"}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"为系统提示词自动注入时间、位置等动态变量"})]}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1,mr:2},children:[t.enableTimeVariable&&e.jsx(g,{icon:e.jsx(k,{size:13}),label:"时间",size:"small",color:"primary",variant:"outlined",sx:{fontSize:"0.7rem",height:"20px"}}),t.enableLocationVariable&&e.jsx(g,{icon:e.jsx(z,{size:13}),label:"位置",size:"small",color:"primary",variant:"outlined",sx:{fontSize:"0.7rem",height:"20px"}}),t.enableOSVariable&&e.jsx(g,{icon:e.jsx(V,{size:13}),label:"系统",size:"small",color:"primary",variant:"outlined",sx:{fontSize:"0.7rem",height:"20px"}}),!t.enableTimeVariable&&!t.enableLocationVariable&&!t.enableOSVariable&&e.jsx(o,{variant:"caption",color:"text.secondary",children:"未启用"})]}),e.jsx(A,{size:"small",children:h?e.jsx(I,{}):e.jsx(P,{})})]}),e.jsxs(R,{in:h,children:[e.jsx(u,{}),e.jsxs(a,{sx:{p:2},children:[e.jsx(G,{severity:"info",icon:e.jsx(N,{}),sx:{mb:2,fontSize:"0.85rem"},children:"启用后，系统会在发送消息时自动在系统提示词末尾追加相应的变量信息。"}),e.jsxs(a,{sx:{mb:3},children:[e.jsx(v,{control:e.jsx(S,{checked:t.enableTimeVariable,onChange:s=>m(s.target.checked),color:"primary"}),label:e.jsxs(a,{children:[e.jsxs(o,{variant:"subtitle2",sx:{fontWeight:600},children:[e.jsx(k,{size:16,style:{marginRight:4,verticalAlign:"middle"}}),"时间变量"]}),e.jsxs(o,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.8rem"},children:["自动注入当前时间：",K()]})]})}),t.enableTimeVariable&&e.jsx(a,{sx:{mt:1,ml:4,p:1,bgcolor:"rgba(0,0,0,0.02)",borderRadius:1},children:e.jsx(o,{variant:"caption",color:"text.secondary",children:"将在系统提示词末尾自动追加时间信息"})})]}),e.jsxs(a,{sx:{mb:3},children:[e.jsx(v,{control:e.jsx(S,{checked:t.enableLocationVariable,onChange:s=>f(s.target.checked),color:"primary"}),label:e.jsxs(a,{children:[e.jsxs(o,{variant:"subtitle2",sx:{fontWeight:600},children:[e.jsx(z,{size:16,style:{marginRight:4,verticalAlign:"middle"}}),"位置变量"]}),e.jsxs(o,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.8rem"},children:["注入位置信息：",U(t.customLocation)]})]})}),t.enableLocationVariable&&e.jsxs(a,{sx:{mt:1,ml:4},children:[e.jsx(W,{fullWidth:!0,size:"small",placeholder:"输入自定义位置（如：北京市朝阳区）",value:t.customLocation,onChange:s=>c(s.target.value),sx:{mb:1}}),e.jsx(a,{sx:{p:1,bgcolor:"rgba(0,0,0,0.02)",borderRadius:1},children:e.jsxs(o,{variant:"caption",color:"text.secondary",children:["将在系统提示词末尾自动追加位置信息",e.jsx("br",{}),"留空将使用系统检测的位置信息"]})})]})]}),e.jsxs(a,{children:[e.jsx(v,{control:e.jsx(S,{checked:t.enableOSVariable,onChange:s=>y(s.target.checked),color:"primary"}),label:e.jsxs(a,{children:[e.jsxs(o,{variant:"subtitle2",sx:{fontWeight:600},children:[e.jsx(V,{size:16,style:{marginRight:4,verticalAlign:"middle"}}),"操作系统变量"]}),e.jsxs(o,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.8rem"},children:["注入操作系统信息：",$()]})]})}),t.enableOSVariable&&e.jsx(a,{sx:{mt:1,ml:4,p:1,bgcolor:"rgba(0,0,0,0.02)",borderRadius:1},children:e.jsx(o,{variant:"caption",color:"text.secondary",children:"将在系统提示词末尾自动追加操作系统信息"})})]})]})]})]})},pe=()=>{const l=_(),[i,h]=x.useState(""),[p,t]=x.useState(new Set(["general"])),[d,m]=x.useState(null),f=x.useMemo(()=>J(),[]),c=x.useMemo(()=>i.trim()?X(i):[],[i]),y=()=>{l(-1)},s=r=>{const n=new Set(p);n.has(r)?n.delete(r):n.add(r),t(n)},D=async r=>{try{await navigator.clipboard.writeText(r.content),m(r.id),setTimeout(()=>m(null),2e3)}catch(n){console.error("复制失败:",n)}},C=r=>e.jsx(b,{elevation:0,sx:{borderRadius:1,border:"1px solid",borderColor:"divider",overflow:"hidden",bgcolor:"background.paper",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-1px)",boxShadow:"0 2px 8px rgba(0,0,0,0.06)"}},children:e.jsxs(a,{sx:{p:1.2},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:.4},children:[e.jsxs(o,{variant:"subtitle2",sx:{fontWeight:600,fontSize:"0.85rem"},children:[r.emoji," ",r.name]}),e.jsx(q,{size:"small",startIcon:e.jsx(H,{size:12}),onClick:()=>D(r),color:d===r.id?"success":"primary",variant:"outlined",sx:{minWidth:"auto",px:.8,py:.3,fontSize:"0.7rem",height:"24px"},children:d===r.id?"已复制":"复制"})]}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:.8,fontSize:"0.75rem",lineHeight:1.2},children:r.description}),e.jsx(a,{sx:{display:"flex",flexWrap:"wrap",gap:.25},children:r.tags.map(n=>e.jsx(g,{label:n,size:"small",variant:"outlined",sx:{fontSize:"0.6rem",height:"16px","& .MuiChip-label":{px:.4}}},n))})]})},r.id),O=r=>{const n=p.has(r.id);return e.jsxs(b,{elevation:0,sx:{mb:2,borderRadius:2,border:"1px solid",borderColor:"divider",overflow:"hidden",bgcolor:"background.paper",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",cursor:"pointer",p:2,bgcolor:"rgba(0,0,0,0.01)","&:hover":{bgcolor:"action.hover"}},onClick:()=>s(r.id),children:[e.jsxs(o,{variant:"subtitle1",sx:{flexGrow:1,fontWeight:600},children:[r.emoji," ",r.name]}),e.jsxs(o,{variant:"body2",color:"text.secondary",sx:{mr:2},children:[r.prompts.length," 个提示词"]}),n?e.jsx(I,{size:20}):e.jsx(P,{size:20})]}),e.jsxs(R,{in:n,children:[e.jsx(u,{}),e.jsxs(a,{sx:{p:2},children:[e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:r.description}),e.jsx(a,{sx:{display:"flex",flexDirection:"column",gap:1},children:r.prompts.map(C)})]})]})]},r.id)};return e.jsxs(a,{sx:{flexGrow:1,display:"flex",flexDirection:"column",height:"100vh",bgcolor:r=>r.palette.mode==="light"?j(r.palette.primary.main,.02):j(r.palette.background.default,.9)},children:[e.jsx(Q,{position:"fixed",elevation:0,sx:{zIndex:r=>r.zIndex.drawer+1,bgcolor:"background.paper",color:"text.primary",borderBottom:1,borderColor:"divider",backdropFilter:"blur(8px)"},children:e.jsxs(F,{children:[e.jsx(A,{edge:"start",color:"inherit",onClick:y,"aria-label":"back",sx:{color:r=>r.palette.primary.main},children:e.jsx(Y,{size:24})}),e.jsx(o,{variant:"h6",component:"div",sx:{flexGrow:1,fontWeight:600,backgroundImage:"linear-gradient(90deg, #4f46e5, #8b5cf6)",backgroundClip:"text",color:"transparent"},children:"智能体提示词集合"})]})}),e.jsxs(a,{sx:{flexGrow:1,overflowY:"auto",p:2,mt:8,"&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0,0,0,0.1)",borderRadius:"3px"}},children:[e.jsx(ie,{}),e.jsxs(b,{elevation:0,sx:{mb:2,borderRadius:2,border:"1px solid",borderColor:"divider",overflow:"hidden",bgcolor:"background.paper",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},children:[e.jsxs(a,{sx:{p:2,bgcolor:"rgba(0,0,0,0.01)"},children:[e.jsx(o,{variant:"subtitle1",sx:{fontWeight:600},children:"搜索提示词"}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"在丰富的提示词库中快速找到您需要的模板"})]}),e.jsx(u,{}),e.jsx(a,{sx:{p:2},children:e.jsx(W,{fullWidth:!0,placeholder:"输入关键词搜索提示词...",value:i,onChange:r=>h(r.target.value),slotProps:{input:{startAdornment:e.jsx(Z,{position:"start",children:e.jsx(ee,{size:20})})}},variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}})})]}),i.trim()&&c.length>0&&e.jsxs(b,{elevation:0,sx:{mb:2,borderRadius:2,border:"1px solid",borderColor:"divider",overflow:"hidden",bgcolor:"background.paper",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},children:[e.jsxs(a,{sx:{p:2,bgcolor:"rgba(0,0,0,0.01)"},children:[e.jsxs(o,{variant:"subtitle1",sx:{fontWeight:600},children:["搜索结果 (",c.length,")"]}),e.jsxs(o,{variant:"body2",color:"text.secondary",children:["找到 ",c.length," 个匹配的提示词"]})]}),e.jsx(u,{}),e.jsx(a,{sx:{p:2},children:e.jsx(a,{sx:{display:"flex",flexDirection:"column",gap:1},children:c.map(C)})})]}),i.trim()&&c.length===0&&e.jsx(b,{elevation:0,sx:{mb:2,borderRadius:2,border:"1px solid",borderColor:"divider",overflow:"hidden",bgcolor:"background.paper",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},children:e.jsx(a,{sx:{p:3,textAlign:"center"},children:e.jsx(o,{color:"text.secondary",children:"没有找到匹配的提示词"})})}),!i.trim()&&f.map(O)]})]})};export{pe as default};
