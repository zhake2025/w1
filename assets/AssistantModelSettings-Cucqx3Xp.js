import{u as Je,b0 as Ve,U as qe,r,j as e,B as a,g as Ge,a as Y,A as $e,T as Ue,I as Oe,b as Xe,d as n,f as Te,b1 as He,P as D,e as c,a5 as Ye,ac as u,X as Q,Y as d,G as p,N as m,ag as Qe,bx as g,by as C,H as S,J as k,S as T,K as x,_ as Z,i as Ze,aQ as es,p as ss,bz as ts}from"./index-BFQp9Otg.js";import{T as ls,a as ee}from"./Tabs-DpUCVX9A.js";import{S as ns}from"./sliders-vertical-BoTXgHOU.js";import{P as as}from"./plus-kwQ_QrJb.js";import{C as is}from"./Card-IUdLwBcS.js";import{C as rs}from"./CardContent-DXovnOt-.js";import{C as os}from"./CardActions-ByhgIrLR.js";function se(ne){const{children:ae,value:X,index:t,...j}=ne;return e.jsx("div",{role:"tabpanel",hidden:X!==t,id:`model-settings-tabpanel-${t}`,"aria-labelledby":`model-settings-tab-${t}`,...j,children:X===t&&e.jsx(a,{sx:{p:3},children:ae})})}const te=.7,le=1,ps=()=>{const ne=Je(),ae=Ve(),X=qe(),t=ae.state?.assistant,[j,ie]=r.useState(te),[w,re]=r.useState(le),[I,oe]=r.useState(40),[z,xe]=r.useState(0),[W,ce]=r.useState(0),[P,de]=r.useState(null),[A,ue]=r.useState([]),[h,E]=r.useState(4096),[R,he]=r.useState({}),[L,me]=r.useState("text"),[K,be]=r.useState("auto"),[B,pe]=r.useState(!0),[_,je]=r.useState(["TEXT"]),[O,ge]=r.useState(1),[M,ve]=r.useState(!1),[H,fe]=r.useState("zh-CN"),[N,ye]=r.useState(!1),[F,Ce]=r.useState(0),[J,Se]=r.useState("medium"),[V,ke]=r.useState(""),[v,q]=r.useState([]),[Me,we]=r.useState(!1),[Ie,ze]=r.useState(!1),[G,We]=r.useState(16e3),[$,Pe]=r.useState(5),[Ne,Ae]=r.useState("medium"),[f,Ee]=r.useState(!0),[U,De]=r.useState(0);r.useEffect(()=>{(async()=>{const i=g();We(i.contextLength||16e3),Pe(i.contextCount||5),Ae(i.defaultThinkingEffort||"medium"),i.maxOutputTokens&&i.maxOutputTokens!==h&&E(i.maxOutputTokens),Ee(i.enableMaxOutputTokens!==!1)})();const l=i=>{if(i.key==="appSettings"&&i.newValue)try{const o=JSON.parse(i.newValue);o.maxOutputTokens&&o.maxOutputTokens!==h&&E(o.maxOutputTokens)}catch(o){console.error("解析localStorage变化失败:",o)}};return window.addEventListener("storage",l),()=>window.removeEventListener("storage",l)},[h]),r.useEffect(()=>{t&&(console.log("AssistantModelSettings: 初始化助手数据",{assistant:t,temperature:t?.temperature,topP:t?.topP,model:t?.model}),ie(t.temperature??te),re(t.topP??le),oe(t.topK??40),xe(t.frequencyPenalty??0),ce(t.presencePenalty??0),de(t.seed??null),ue(t.stopSequences??[]),E(t.maxTokens??4096),he(t.logitBias??{}),me(t.responseFormat??"text"),be(t.toolChoice??"auto"),pe(t.parallelToolCalls??!0),je(t.responseModalities??["TEXT"]),ge(t.candidateCount??1),ve(t.enableSpeech??!1),fe(t.speechLanguage??"zh-CN"),ye(t.enableThinking??!1),Ce(t.thinkingBudget??0),Se(t.mediaResolution??"medium"),ke(t.model||""),q([]))},[t]),r.useEffect(()=>{const s=j!==(t?.temperature??te)||w!==(t?.topP??le)||I!==(t?.topK??40)||z!==(t?.frequencyPenalty??0)||W!==(t?.presencePenalty??0)||P!==(t?.seed??null)||JSON.stringify(A)!==JSON.stringify(t?.stopSequences??[])||h!==(t?.maxTokens??4096)||JSON.stringify(R)!==JSON.stringify(t?.logitBias??{})||L!==(t?.responseFormat??"text")||K!==(t?.toolChoice??"auto")||B!==(t?.parallelToolCalls??!0)||JSON.stringify(_)!==JSON.stringify(t?.responseModalities??["TEXT"])||O!==(t?.candidateCount??1)||M!==(t?.enableSpeech??!1)||H!==(t?.speechLanguage??"zh-CN")||N!==(t?.enableThinking??!1)||F!==(t?.thinkingBudget??0)||J!==(t?.mediaResolution??"medium")||V!==(t?.model||"")||v.length>0;we(s)},[j,w,I,z,W,P,A,h,R,L,K,B,_,O,M,H,N,F,J,V,v,t]);const Re=()=>{const s={name:"",value:"",type:"string"};q([...v,s])},y=(s,l,i)=>{const o=[...v];if(l==="type"){let b="";switch(i){case"number":b=0;break;case"boolean":b=!1;break;case"json":b="";break;default:b=""}o[s]={...o[s],type:i,value:b}}else o[s]={...o[s],[l]:i};q(o)},Le=s=>{const l=v.filter((i,o)=>o!==s);q(l)},Ke=(s,l)=>{switch(s.type){case"number":return e.jsx(p,{type:"number",value:s.value,onChange:i=>y(l,"value",parseFloat(i.target.value)||0),size:"small",fullWidth:!0,inputProps:{step:.01}});case"boolean":return e.jsx(Z,{checked:s.value,onChange:i=>y(l,"value",i.target.checked)});case"json":return e.jsx(p,{multiline:!0,rows:3,value:typeof s.value=="string"?s.value:JSON.stringify(s.value,null,2),onChange:i=>{try{const o=JSON.parse(i.target.value);y(l,"value",o)}catch{y(l,"value",i.target.value)}},size:"small",fullWidth:!0,placeholder:'{"key": "value"}'});default:return e.jsx(p,{value:s.value,onChange:i=>y(l,"value",i.target.value),size:"small",fullWidth:!0,placeholder:"参数值"})}},Be=()=>{ne(-1)},_e=async()=>{if(t){ze(!0);try{const s={...t,temperature:j,topP:w,...I!==40&&{topK:I},...z!==0&&{frequencyPenalty:z},...W!==0&&{presencePenalty:W},...P!==null&&{seed:P},...A.length>0&&{stopSequences:A},maxTokens:h,...(()=>{const l=g();return C({...l,maxOutputTokens:h,enableMaxOutputTokens:f}),{}})(),...Object.keys(R).length>0&&{logitBias:R},...L!=="text"&&{responseFormat:L},...K!=="auto"&&{toolChoice:K},...B!==!0&&{parallelToolCalls:B},...JSON.stringify(_)!==JSON.stringify(["TEXT"])&&{responseModalities:_},...O!==1&&{candidateCount:O},...M&&{enableSpeech:M,speechLanguage:H},...N&&{enableThinking:N,thinkingBudget:F},...J!=="medium"&&{mediaResolution:J},model:V,updatedAt:new Date().toISOString()};console.log("AssistantModelSettings: 保存助手设置",{assistantId:t.id,assistantName:t.name,temperature:j,topP:w,selectedModel:V,updatedAssistant:s}),await ss.saveAssistant(s),X(ts(s)),we(!1),console.log("助手设置已保存成功")}catch(s){console.error("保存助手设置失败:",s)}finally{ze(!1)}}},Fe=()=>{ie(te),re(le),oe(40),xe(0),ce(0),de(null),ue([]),E(4096),he({}),me("text"),be("auto"),pe(!0),je(["TEXT"]),ge(1),ve(!1),fe("zh-CN"),ye(!1),Ce(0),Se("medium"),ke(""),q([])};return t?e.jsxs(a,{sx:{flexGrow:1,display:"flex",flexDirection:"column",height:"100vh",bgcolor:s=>s.palette.mode==="light"?Y(s.palette.primary.main,.02):Y(s.palette.background.default,.9)},children:[e.jsx($e,{position:"fixed",elevation:0,sx:{zIndex:s=>s.zIndex.drawer+1,bgcolor:"background.paper",color:"text.primary",borderBottom:1,borderColor:"divider",backdropFilter:"blur(8px)"},children:e.jsxs(Ue,{children:[e.jsx(Oe,{edge:"start",color:"inherit",onClick:Be,"aria-label":"back",sx:{color:s=>s.palette.primary.main},children:e.jsx(Xe,{})}),e.jsxs(n,{variant:"h6",component:"div",sx:{flexGrow:1,fontWeight:600,backgroundImage:"linear-gradient(90deg, #9333EA, #754AB4)",backgroundClip:"text",color:"transparent"},children:[t.name," - 模型设置"]}),Me&&e.jsx(Te,{startIcon:e.jsx(He,{}),onClick:_e,disabled:Ie,variant:"contained",size:"small",sx:{background:"linear-gradient(90deg, #9333EA, #754AB4)",fontWeight:600,"&:hover":{background:"linear-gradient(90deg, #8324DB, #6D3CAF)"}},children:Ie?"保存中...":"保存"})]})}),e.jsxs(a,{sx:{flexGrow:1,overflowY:"auto",p:{xs:1,sm:2},mt:8,"&::-webkit-scrollbar":{width:{xs:"4px",sm:"6px"}},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0,0,0,0.1)",borderRadius:"3px"}},children:[e.jsxs(D,{elevation:0,sx:{mb:2,borderRadius:2,border:"1px solid",borderColor:"divider",overflow:"hidden",bgcolor:"background.paper",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},children:[e.jsxs(a,{sx:{p:{xs:1.5,sm:2},bgcolor:"rgba(0,0,0,0.01)"},children:[e.jsx(n,{variant:"subtitle1",sx:{fontWeight:600,fontSize:{xs:"1rem",sm:"1.1rem"}},children:"助手信息"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.8rem",sm:"0.875rem"}},children:"当前正在配置的助手详细信息"})]}),e.jsx(c,{}),e.jsx(a,{sx:{p:{xs:1.5,sm:2}},children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Ye,{sx:{width:{xs:40,sm:48},height:{xs:40,sm:48},bgcolor:Y("#9333EA",.12),color:"#9333EA",boxShadow:"0 2px 6px rgba(0,0,0,0.05)"},children:t.emoji||t.name.charAt(0)}),e.jsxs(a,{sx:{flex:1},children:[e.jsx(n,{variant:"h6",sx:{fontWeight:600,fontSize:{xs:"1rem",sm:"1.1rem"}},children:t.name}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.8rem",sm:"0.875rem"}},children:"配置模型参数和行为设置"}),t.isSystem&&e.jsx(u,{label:"系统助手",size:"small",sx:{mt:.5,bgcolor:Y("#9333EA",.1),color:"#9333EA",fontWeight:500,fontSize:{xs:"0.7rem",sm:"0.75rem"},height:{xs:20,sm:24}}})]})]})})]}),e.jsx(D,{elevation:0,sx:{mb:2,borderRadius:2,border:"1px solid",borderColor:"divider",overflow:"hidden",bgcolor:"background.paper",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},children:e.jsxs(ls,{value:U,onChange:(s,l)=>De(l),variant:"fullWidth",sx:{"& .MuiTab-root":{fontWeight:600,fontSize:{xs:"0.8rem",sm:"0.875rem"},textTransform:"none","&.Mui-selected":{color:"#9333EA"}},"& .MuiTabs-indicator":{backgroundColor:"#9333EA",height:3}},children:[e.jsx(ee,{label:"通用参数"}),e.jsx(ee,{label:"OpenAI 专属"}),e.jsx(ee,{label:"Gemini 专属"}),e.jsx(ee,{label:"自定义参数"})]})}),e.jsx(se,{value:U,index:0,children:e.jsxs(D,{elevation:0,sx:{mb:2,borderRadius:2,border:"1px solid",borderColor:"divider",overflow:"hidden",bgcolor:"background.paper",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},children:[e.jsxs(a,{sx:{p:{xs:1.5,sm:2},bgcolor:"rgba(0,0,0,0.01)"},children:[e.jsx(n,{variant:"subtitle1",sx:{fontWeight:600,fontSize:{xs:"1rem",sm:"1.1rem"}},children:"通用参数设置"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.8rem",sm:"0.875rem"}},children:"配置模型的基础参数，适用于大多数AI模型"})]}),e.jsx(c,{}),e.jsx(a,{sx:{p:{xs:1.5,sm:2}},children:e.jsxs(Q,{sx:{p:0},children:[e.jsxs(d,{sx:{flexDirection:"column",alignItems:"stretch",py:2},children:[e.jsx(n,{variant:"subtitle2",sx:{mb:1,fontWeight:"medium"},children:"默认模型"}),e.jsx(p,{value:V,onChange:s=>ke(s.target.value),placeholder:"输入模型ID",size:"small",fullWidth:!0})]}),e.jsx(c,{}),e.jsxs(d,{sx:{flexDirection:"column",alignItems:"stretch",py:2},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(n,{variant:"subtitle2",sx:{fontWeight:"medium"},children:"温度 (Temperature)"}),e.jsx(u,{label:j.toFixed(2),size:"small"})]}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"控制回答的创造性和随机性。较低值更保守，较高值更有创意。"}),e.jsx(m,{value:j,onChange:(s,l)=>ie(l),min:0,max:2,step:.01,marks:[{value:0,label:"0"},{value:.7,label:"0.7"},{value:2,label:"2"}]})]}),e.jsx(c,{}),e.jsxs(d,{sx:{flexDirection:"column",alignItems:"stretch",py:2},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(n,{variant:"subtitle2",sx:{fontWeight:"medium"},children:"Top-P"}),e.jsx(u,{label:w.toFixed(2),size:"small"})]}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"控制词汇选择的多样性。较低值更聚焦，较高值更多样。"}),e.jsx(m,{value:w,onChange:(s,l)=>re(l),min:0,max:1,step:.01,marks:[{value:0,label:"0"},{value:1,label:"1"}]})]}),e.jsx(c,{}),e.jsxs(d,{sx:{flexDirection:"column",alignItems:"stretch",py:2},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(n,{variant:"subtitle2",sx:{fontWeight:"medium"},children:"Top-K"}),e.jsx(u,{label:I,size:"small"})]}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"限制每步采样时考虑的最可能的token数量。较低值更保守，较高值更多样。"}),e.jsx(m,{value:I,onChange:(s,l)=>oe(l),min:1,max:100,step:1,marks:[{value:1,label:"1"},{value:40,label:"40"},{value:100,label:"100"}]})]}),e.jsx(c,{}),e.jsxs(d,{sx:{flexDirection:"column",alignItems:"stretch",py:2},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(n,{variant:"subtitle2",sx:{fontWeight:"medium"},children:"频率惩罚 (Frequency Penalty)"}),e.jsx(u,{label:z.toFixed(2),size:"small"})]}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"根据token在文本中出现的频率对其进行惩罚。正值减少重复，负值增加重复。"}),e.jsx(m,{value:z,onChange:(s,l)=>xe(l),min:-2,max:2,step:.01,marks:[{value:-2,label:"-2"},{value:0,label:"0"},{value:2,label:"2"}]})]}),e.jsx(c,{}),e.jsxs(d,{sx:{flexDirection:"column",alignItems:"stretch",py:2},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(n,{variant:"subtitle2",sx:{fontWeight:"medium"},children:"存在惩罚 (Presence Penalty)"}),e.jsx(u,{label:W.toFixed(2),size:"small"})]}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"对已出现的token进行惩罚，不考虑频率。正值鼓励新话题，负值保持话题。"}),e.jsx(m,{value:W,onChange:(s,l)=>ce(l),min:-2,max:2,step:.01,marks:[{value:-2,label:"-2"},{value:0,label:"0"},{value:2,label:"2"}]})]}),e.jsx(c,{}),e.jsxs(d,{sx:{flexDirection:"column",alignItems:"stretch",py:2},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(n,{variant:"subtitle2",sx:{fontWeight:"medium"},children:"随机种子 (Seed)"}),e.jsx(u,{label:P??"随机",size:"small"})]}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"设置随机种子以获得可重现的结果。留空使用随机种子。"}),e.jsx(p,{type:"number",value:P??"",onChange:s=>de(s.target.value?parseInt(s.target.value):null),placeholder:"留空使用随机种子",size:"small",fullWidth:!0})]}),e.jsx(c,{}),e.jsxs(d,{sx:{flexDirection:"column",alignItems:"stretch",py:2},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(n,{variant:"subtitle2",sx:{fontWeight:"medium"},children:"最大输出Token (Max Output Tokens)"}),e.jsx(Qe,{checked:f,onChange:s=>{const l=s.target.checked;Ee(l);const i=g();C({...i,enableMaxOutputTokens:l}),window.dispatchEvent(new CustomEvent("enableMaxTokensChanged",{detail:l}))}})]}),e.jsx(u,{label:f?`${h} tokens`:"已禁用",size:"small",color:f?"default":"secondary"})]}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"限制模型生成的最大token数量。不同模型支持的最大输出长度不同，如果设置值超过模型限制，API会自动调整或返回错误。 较高值允许更长的回复，但会消耗更多资源和时间。关闭开关后，API请求中不会包含此参数。"}),e.jsx(a,{sx:{mb:2,px:1,opacity:f?1:.5},children:e.jsx(m,{value:Math.min(h,65536),onChange:(s,l)=>{const i=l;E(i);const o=g();C({...o,maxOutputTokens:i}),window.dispatchEvent(new CustomEvent("maxOutputTokensChanged",{detail:i}))},disabled:!f,min:256,max:65536,step:256,marks:[{value:256,label:"256"},{value:2048,label:"2K"},{value:4096,label:"4K"},{value:8192,label:"8K"},{value:16384,label:"16K"},{value:32768,label:"32K"},{value:65536,label:"64K"}],sx:{"& .MuiSlider-markLabel":{fontSize:"0.7rem"}}})}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(n,{variant:"body2",color:"text.secondary",sx:{minWidth:"fit-content"},children:"精确值:"}),e.jsx(p,{type:"text",value:h,onChange:s=>{const l=s.target.value;if(l===""||/^\d+$/.test(l)){const i=l===""?0:parseInt(l);if(i<=2e6){E(i);const o=g();C({...o,maxOutputTokens:i}),window.dispatchEvent(new CustomEvent("maxOutputTokensChanged",{detail:i}))}}},disabled:!f,size:"small",sx:{width:120}}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"tokens (最大2M)"})]})]}),e.jsx(c,{}),e.jsxs(d,{sx:{flexDirection:"column",alignItems:"stretch",py:2},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ns,{size:20,color:"var(--mui-palette-primary-main)"}),e.jsx(n,{variant:"subtitle2",sx:{fontWeight:"medium"},children:"上下文设置 (快速访问)"})]}),e.jsx(u,{label:`${G===64e3?"不限":G} 字符 | ${$===100?"最大":$} 条`,size:"small",color:"primary",variant:"outlined"})]}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"快速调整上下文长度、消息数量和思维链设置。这些设置会影响所有助手的对话行为。"}),e.jsxs(a,{sx:{mb:2},children:[e.jsxs(n,{variant:"body2",sx:{mb:1,fontWeight:"medium"},children:["上下文长度: ",G===64e3?"不限":G," 字符"]}),e.jsx(m,{value:G,onChange:(s,l)=>{const i=l;We(i);const o=g();C({...o,contextLength:i})},min:0,max:64e3,step:1e3,marks:[{value:0,label:"0"},{value:16e3,label:"16K"},{value:32e3,label:"32K"},{value:64e3,label:"64K"}]})]}),e.jsxs(a,{sx:{mb:2},children:[e.jsxs(n,{variant:"body2",sx:{mb:1,fontWeight:"medium"},children:["上下文消息数: ",$===100?"最大":$," 条"]}),e.jsx(m,{value:$,onChange:(s,l)=>{const i=l;Pe(i);const o=g();C({...o,contextCount:i})},min:0,max:100,step:1,marks:[{value:0,label:"0"},{value:25,label:"25"},{value:50,label:"50"},{value:100,label:"最大"}]})]}),e.jsxs(a,{children:[e.jsx(n,{variant:"body2",sx:{mb:1,fontWeight:"medium"},children:"默认思维链长度"}),e.jsxs(S,{size:"small",fullWidth:!0,children:[e.jsx(k,{children:"思维链长度"}),e.jsxs(T,{value:Ne,onChange:s=>{const l=s.target.value;Ae(l);const i=g();C({...i,defaultThinkingEffort:l})},label:"思维链长度",children:[e.jsx(x,{value:"off",children:"关闭思考"}),e.jsx(x,{value:"low",children:"低强度思考"}),e.jsx(x,{value:"medium",children:"中强度思考（推荐）"}),e.jsx(x,{value:"high",children:"高强度思考"}),e.jsx(x,{value:"auto",children:"自动思考"})]})]})]})]}),e.jsx(c,{}),e.jsxs(d,{sx:{flexDirection:"column",alignItems:"stretch",py:2},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(n,{variant:"subtitle2",sx:{fontWeight:"medium"},children:"停止序列 (Stop Sequences)"}),e.jsx(u,{label:A.length,size:"small"})]}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"遇到这些字符序列时停止生成。每行一个序列。"}),e.jsx(p,{multiline:!0,rows:3,value:A.join(`
`),onChange:s=>ue(s.target.value.split(`
`).filter(l=>l.trim())),placeholder:"每行输入一个停止序列",size:"small",fullWidth:!0})]})]})})]})}),e.jsx(se,{value:U,index:1,children:e.jsxs(D,{elevation:0,sx:{mb:2,borderRadius:2,border:"1px solid",borderColor:"divider",overflow:"hidden",bgcolor:"background.paper",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},children:[e.jsxs(a,{sx:{p:{xs:1.5,sm:2},bgcolor:"rgba(0,0,0,0.01)"},children:[e.jsx(n,{variant:"subtitle1",sx:{fontWeight:600,fontSize:{xs:"1rem",sm:"1.1rem"},color:"#06b6d4"},children:"OpenAI 专属参数"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.8rem",sm:"0.875rem"}},children:"专门针对OpenAI模型的高级参数配置"})]}),e.jsx(c,{}),e.jsx(a,{sx:{p:{xs:1.5,sm:2}},children:e.jsx(Q,{sx:{p:0},children:e.jsxs(d,{sx:{flexDirection:"column",alignItems:"stretch",py:2},children:[e.jsxs(a,{sx:{mb:3},children:[e.jsx(n,{variant:"subtitle2",sx:{mb:1,fontWeight:"medium"},children:"响应格式 (Response Format)"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"指定模型响应的格式。JSON模式确保输出为有效JSON。"}),e.jsxs(S,{size:"small",fullWidth:!0,children:[e.jsx(k,{children:"响应格式"}),e.jsxs(T,{value:L,onChange:s=>me(s.target.value),label:"响应格式",children:[e.jsx(x,{value:"text",children:"文本"}),e.jsx(x,{value:"json_object",children:"JSON对象"})]})]})]}),e.jsxs(a,{sx:{mb:3},children:[e.jsx(n,{variant:"subtitle2",sx:{mb:1,fontWeight:"medium"},children:"工具选择 (Tool Choice)"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"控制模型是否以及如何调用函数工具。"}),e.jsxs(S,{size:"small",fullWidth:!0,children:[e.jsx(k,{children:"工具选择"}),e.jsxs(T,{value:K,onChange:s=>be(s.target.value),label:"工具选择",children:[e.jsx(x,{value:"none",children:"禁用"}),e.jsx(x,{value:"auto",children:"自动"}),e.jsx(x,{value:"required",children:"必须"})]})]})]}),e.jsxs(a,{sx:{mb:3},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(n,{variant:"subtitle2",sx:{fontWeight:"medium"},children:"并行工具调用 (Parallel Tool Calls)"}),e.jsx(Z,{checked:B,onChange:s=>pe(s.target.checked)})]}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"是否允许模型同时调用多个函数工具。"})]}),e.jsxs(a,{sx:{mb:3},children:[e.jsx(n,{variant:"subtitle2",sx:{mb:1,fontWeight:"medium"},children:"Logit偏置 (Logit Bias)"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"修改指定token出现的可能性。格式：token_id:bias_value，每行一个。"}),e.jsx(p,{multiline:!0,rows:3,value:Object.entries(R).map(([s,l])=>`${s}:${l}`).join(`
`),onChange:s=>{const l={};s.target.value.split(`
`).forEach(i=>{const[o,b]=i.split(":");o&&b&&!isNaN(Number(b))&&(l[o.trim()]=Number(b))}),he(l)},placeholder:"例如：50256:-100",size:"small",fullWidth:!0})]})]})})})]})}),e.jsx(se,{value:U,index:2,children:e.jsxs(D,{elevation:0,sx:{mb:2,borderRadius:2,border:"1px solid",borderColor:"divider",overflow:"hidden",bgcolor:"background.paper",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},children:[e.jsxs(a,{sx:{p:{xs:1.5,sm:2},bgcolor:"rgba(0,0,0,0.01)"},children:[e.jsx(n,{variant:"subtitle1",sx:{fontWeight:600,fontSize:{xs:"1rem",sm:"1.1rem"},color:"#8b5cf6"},children:"Gemini 专属参数"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.8rem",sm:"0.875rem"}},children:"专门针对Google Gemini模型的高级参数配置"})]}),e.jsx(c,{}),e.jsx(a,{sx:{p:{xs:1.5,sm:2}},children:e.jsx(Q,{sx:{p:0},children:e.jsxs(d,{sx:{flexDirection:"column",alignItems:"stretch",py:2},children:[e.jsxs(a,{sx:{mb:3},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(n,{variant:"subtitle2",sx:{fontWeight:"medium"},children:"候选数量 (Candidate Count)"}),e.jsx(u,{label:O,size:"small"})]}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"生成的候选响应数量。注意：仅部分模型支持多候选。"}),e.jsx(m,{value:O,onChange:(s,l)=>ge(l),min:1,max:4,step:1,marks:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"}]})]}),e.jsxs(a,{sx:{mb:3},children:[e.jsx(n,{variant:"subtitle2",sx:{mb:1,fontWeight:"medium"},children:"响应模态 (Response Modalities)"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"指定模型可以返回的内容类型。"}),e.jsxs(S,{size:"small",fullWidth:!0,children:[e.jsx(k,{children:"响应模态"}),e.jsxs(T,{multiple:!0,value:_,onChange:s=>je(s.target.value),label:"响应模态",children:[e.jsx(x,{value:"TEXT",children:"文本"}),e.jsx(x,{value:"IMAGE",children:"图像"}),e.jsx(x,{value:"AUDIO",children:"音频"})]})]})]}),e.jsxs(a,{sx:{mb:3},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(n,{variant:"subtitle2",sx:{fontWeight:"medium"},children:"语音输出 (Speech Output)"}),e.jsx(Z,{checked:M,onChange:s=>ve(s.target.checked)})]}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"启用语音输出功能。"}),M&&e.jsxs(S,{size:"small",fullWidth:!0,sx:{mt:2},children:[e.jsx(k,{children:"语音语言"}),e.jsxs(T,{value:H,onChange:s=>fe(s.target.value),label:"语音语言",children:[e.jsx(x,{value:"zh-CN",children:"中文（简体）"}),e.jsx(x,{value:"en-US",children:"英语（美国）"}),e.jsx(x,{value:"ja-JP",children:"日语"}),e.jsx(x,{value:"ko-KR",children:"韩语"})]})]})]}),e.jsxs(a,{sx:{mb:3},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(n,{variant:"subtitle2",sx:{fontWeight:"medium"},children:"思维链 (Thinking)"}),e.jsx(Z,{checked:N,onChange:s=>ye(s.target.checked)})]}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"启用思维链功能，显示模型的推理过程。Gemini使用token数量控制(0-24576)，OpenAI使用强度等级控制。"}),N&&e.jsxs(a,{sx:{mt:2},children:[e.jsxs(n,{variant:"body2",sx:{mb:1},children:["思维预算: ",F," tokens"]}),e.jsx(m,{value:F,onChange:(s,l)=>Ce(l),min:0,max:24576,step:256,marks:[{value:0,label:"0"},{value:2048,label:"2K"},{value:8192,label:"8K"},{value:16384,label:"16K"},{value:24576,label:"24K"}]})]})]}),e.jsxs(a,{sx:{mb:3},children:[e.jsx(n,{variant:"subtitle2",sx:{mb:1,fontWeight:"medium"},children:"媒体分辨率 (Media Resolution)"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"处理图像和视频时的分辨率设置。"}),e.jsxs(S,{size:"small",fullWidth:!0,children:[e.jsx(k,{children:"媒体分辨率"}),e.jsxs(T,{value:J,onChange:s=>Se(s.target.value),label:"媒体分辨率",children:[e.jsx(x,{value:"low",children:"低 (64 tokens)"}),e.jsx(x,{value:"medium",children:"中 (256 tokens)"}),e.jsx(x,{value:"high",children:"高 (256 tokens + 缩放)"})]})]})]})]})})})]})}),e.jsx(se,{value:U,index:3,children:e.jsxs(D,{elevation:0,sx:{mb:2,borderRadius:2,border:"1px solid",borderColor:"divider",overflow:"hidden",bgcolor:"background.paper",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},children:[e.jsxs(a,{sx:{p:{xs:1.5,sm:2},bgcolor:"rgba(0,0,0,0.01)"},children:[e.jsx(n,{variant:"subtitle1",sx:{fontWeight:600,fontSize:{xs:"1rem",sm:"1.1rem"},color:"#10b981"},children:"自定义参数"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.8rem",sm:"0.875rem"}},children:"为模型添加自定义参数，支持多种数据类型"})]}),e.jsx(c,{}),e.jsx(a,{sx:{p:{xs:1.5,sm:2}},children:e.jsxs(Q,{sx:{p:0},children:[e.jsxs(d,{sx:{flexDirection:"column",alignItems:"stretch",py:2},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(n,{variant:"subtitle2",sx:{fontWeight:"medium"},children:"自定义参数"}),e.jsx(Te,{startIcon:e.jsx(as,{}),onClick:Re,variant:"outlined",size:"small",children:"添加参数"})]}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"为模型添加自定义参数，支持字符串、数字、布尔值和JSON格式。"}),v.length===0?e.jsx(a,{sx:{textAlign:"center",py:3,color:"text.secondary"},children:e.jsx(n,{variant:"body2",children:'暂无自定义参数，点击"添加参数"开始配置'})}):e.jsx(a,{sx:{display:"flex",flexDirection:"column",gap:2},children:v.map((s,l)=>e.jsxs(is,{variant:"outlined",sx:{p:0},children:[e.jsx(rs,{sx:{pb:1},children:e.jsxs(a,{sx:{display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[e.jsx(a,{sx:{flex:"1 1 200px",minWidth:"150px"},children:e.jsx(p,{label:"参数名",value:s.name,onChange:i=>y(l,"name",i.target.value),size:"small",fullWidth:!0,placeholder:"参数名称"})}),e.jsx(a,{sx:{flex:"0 0 120px"},children:e.jsxs(S,{size:"small",fullWidth:!0,children:[e.jsx(k,{children:"类型"}),e.jsxs(T,{value:s.type,onChange:i=>y(l,"type",i.target.value),label:"类型",children:[e.jsx(x,{value:"string",children:"字符串"}),e.jsx(x,{value:"number",children:"数字"}),e.jsx(x,{value:"boolean",children:"布尔值"}),e.jsx(x,{value:"json",children:"JSON"})]})]})}),e.jsx(a,{sx:{flex:"1 1 200px",minWidth:"150px"},children:Ke(s,l)})]})}),e.jsx(os,{sx:{pt:0,justifyContent:"flex-end"},children:e.jsx(Oe,{onClick:()=>Le(l),color:"error",size:"small",children:e.jsx(Ze,{})})})]},l))})]}),e.jsx(d,{sx:{justifyContent:"center",py:3},children:e.jsx(Te,{startIcon:e.jsx(es,{}),onClick:Fe,variant:"outlined",color:"secondary",children:"重置为默认值"})})]})})]})})]})]}):e.jsx(a,{sx:{p:2},children:e.jsx(Ge,{severity:"error",children:"未找到助手信息，请返回重新选择"})})};export{ps as default};
