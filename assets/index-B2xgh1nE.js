import{u as k,r as a,ad as p,j as e,B as o,A as C,T as y,I as A,b as B,d as l,P as z,a as c,a5 as E,ac as n}from"./index-5OteHtpV.js";import{T as I,a as x}from"./Tabs-CDQ1XREM.js";import{V as W}from"./volume-2-CZ9kkBnD.js";import{M as R}from"./mic-CkhU9HLo.js";import{L as M}from"./ListItemButton-B_D_P2EP.js";const L=[{id:"siliconflow",name:"硅基流动 TTS",description:"国产化TTS服务，支持多语言语音合成",icon:"🚀",color:"#9333EA",features:["CosyVoice2-0.5B","多语言支持","情感控制","高性价比"],status:"recommended",path:"/settings/voice/tts/siliconflow"},{id:"openai",name:"OpenAI TTS",description:"OpenAI官方TTS服务，音质优秀",icon:"🤖",color:"#10B981",features:["TTS-1","TTS-1-HD","6种语音","流式传输"],status:"premium",path:"/settings/voice/tts/openai"},{id:"azure",name:"微软Azure TTS",description:"企业级TTS服务，功能丰富",icon:"☁️",color:"#3B82F6",features:["Neural语音","SSML支持","多种风格","角色扮演"],status:"enterprise",path:"/settings/voice/tts/azure"}],V=[{id:"capacitor",name:"Capacitor 语音识别",description:"基于设备的本地语音识别服务",icon:"📱",color:"#F59E0B",features:["本地处理","实时识别","多语言","隐私保护"],status:"free",path:"/settings/voice/asr/capacitor"},{id:"openai-whisper",name:"OpenAI Whisper",description:"强大的云端语音识别模型",icon:"🎯",color:"#EF4444",features:["高精度","多语言","噪音抑制","云端处理"],status:"premium",path:"/settings/voice/asr/openai-whisper"}],m={recommended:{label:"推荐",color:"primary"},premium:{label:"付费",color:"warning"},enterprise:{label:"企业级",color:"info"},free:{label:"免费",color:"success"}},D=()=>{const d=k(),[s,h]=a.useState(0),[b,u]=a.useState("siliconflow"),[g,f]=a.useState("capacitor"),i=a.useCallback(async()=>{try{const r=await p("selected_tts_service")||"siliconflow",t=await p("speech_recognition_provider")||"capacitor";u(r),f(t)}catch(r){console.error("加载当前服务状态失败:",r)}},[]);a.useEffect(()=>(i(),window.addEventListener("focus",i),()=>window.removeEventListener("focus",i)),[i]);const S=()=>{d("/settings")},v=(r,t)=>{h(t)},T=r=>{d(r)};a.useEffect(()=>{const r=()=>{document.hidden||i()};return document.addEventListener("visibilitychange",r),()=>document.removeEventListener("visibilitychange",r)},[i]);const w=s===0?L:V;return e.jsxs(o,{sx:{display:"flex",flexDirection:"column",height:"100vh",width:"100vw",overflow:"hidden",bgcolor:"background.default"},children:[e.jsx(C,{position:"fixed",elevation:0,sx:{zIndex:r=>r.zIndex.drawer+1,bgcolor:"background.paper",color:"text.primary",borderBottom:1,borderColor:"divider",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",background:"rgba(255, 255, 255, 0.8)","@media (prefers-color-scheme: dark)":{background:"rgba(18, 18, 18, 0.8)"}},children:e.jsxs(y,{sx:{minHeight:{xs:56,sm:64},px:{xs:1,sm:2,md:3}},children:[e.jsx(A,{edge:"start",onClick:S,"aria-label":"返回",size:"large",sx:{color:"primary.main",mr:{xs:1,sm:2},"&:hover":{bgcolor:"primary.main",color:"primary.contrastText",transform:"scale(1.05)"},transition:"all 0.2s ease-in-out"},children:e.jsx(B,{size:20})}),e.jsx(l,{variant:"h6",component:"div",sx:{flexGrow:1,fontWeight:600,backgroundImage:"linear-gradient(90deg, #9333EA, #754AB4)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent"},children:"语音功能设置"})]})}),e.jsx(o,{sx:{flex:1,overflow:"auto",overflowX:"hidden",pt:{xs:7,sm:8},pb:{xs:2,sm:3},px:{xs:1,sm:2,md:3},WebkitOverflowScrolling:"touch",scrollBehavior:"smooth","&::-webkit-scrollbar":{width:{xs:"4px",sm:"6px"}},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0,0,0,0.1)",borderRadius:"10px","&:hover":{backgroundColor:"rgba(0,0,0,0.2)"}}},children:e.jsxs(o,{sx:{width:"100%"},children:[e.jsxs(I,{value:s,onChange:v,variant:"fullWidth",sx:{mb:{xs:2,sm:3},borderBottom:1,borderColor:"divider","& .MuiTabs-indicator":{height:{xs:3,sm:4},borderRadius:"2px 2px 0 0",background:"linear-gradient(90deg, #9333EA, #754AB4)"},"& .MuiTab-root":{minHeight:64,fontWeight:600,textTransform:"none","&.Mui-selected":{color:"primary.main"}}},children:[e.jsx(x,{label:"文本转语音 (TTS)",icon:e.jsx(W,{size:20}),iconPosition:"start"}),e.jsx(x,{label:"语音识别 (ASR)",icon:e.jsx(R,{size:20}),iconPosition:"start"})]}),e.jsx(o,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)"},gap:{xs:1.5,sm:2,md:2.5}},children:w.map(r=>e.jsx(z,{elevation:0,sx:{borderRadius:{xs:2,sm:2.5},overflow:"hidden",border:"1px solid",borderColor:"divider",transition:"all 0.2s ease-in-out",bgcolor:"background.paper",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",minHeight:{xs:"140px",sm:"160px"},"&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(0,0,0,0.12)",borderColor:t=>c(t.palette.primary.main,.3)}},children:e.jsx(M,{onClick:()=>T(r.path),sx:{p:0,height:"100%","&:hover":{bgcolor:"transparent"}},children:e.jsxs(o,{sx:{display:"flex",flexDirection:"column",width:"100%",p:{xs:2,sm:2.5},height:"100%"},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"flex-start",mb:1.5},children:[e.jsx(E,{sx:{bgcolor:c(r.color,.12),color:r.color,mr:1.5,width:44,height:44,boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:r.icon}),e.jsxs(o,{sx:{flex:1},children:[e.jsx(o,{sx:{display:"flex",alignItems:"center",mb:.5},children:e.jsx(l,{variant:"subtitle1",sx:{fontWeight:600,color:"text.primary",lineHeight:1.2},children:r.name})}),e.jsxs(o,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:[(s===0&&b===r.id||s===1&&g===r.id)&&e.jsx(n,{size:"small",label:"当前启用",color:"success",variant:"filled",sx:{fontSize:"0.65rem",height:18,"& .MuiChip-label":{px:.75}}}),e.jsx(n,{size:"small",label:m[r.status].label,color:m[r.status].color,variant:"outlined",sx:{fontSize:"0.7rem",height:20,"& .MuiChip-label":{px:.75}}})]})]})]}),e.jsx(l,{variant:"body2",sx:{color:"text.secondary",lineHeight:1.4,mb:1.5,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:r.description}),e.jsxs(o,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mt:"auto"},children:[r.features.slice(0,3).map((t,j)=>e.jsx(n,{size:"small",label:t,variant:"filled",sx:{bgcolor:c(r.color,.08),color:r.color,fontSize:"0.65rem",height:18,"& .MuiChip-label":{px:.75}}},j)),r.features.length>3&&e.jsx(n,{size:"small",label:`+${r.features.length-3}`,variant:"outlined",sx:{fontSize:"0.65rem",height:18,"& .MuiChip-label":{px:.75}}})]})]})})},r.id))})]})})]})};export{D as default};
