import{a2 as E,r as A,j as e,B as p,d as c,P as u,X as I,Y as F,a4 as S,Z as L,I as P,br as G,u as W,a6 as z,bn as B,a as k,A as H,T as O,b as N,b4 as V,i as q,e as Y,H as D,J as R,S as M,K as h,a0 as J,a1 as K,$ as v}from"./index-BFQp9Otg.js";import{C}from"./CustomIcon-lyslYg9h.js";import{D as Q,C as w,P as X}from"./dnd.esm-BzUJ4tHl.js";import{G as Z}from"./grip-vertical-BySsSA-a.js";import{E as _}from"./eye-off-dxYQvFn2.js";import{C as $,a as U,I as ee,b as re}from"./ChatToolbar-BdQQT40n.js";import{C as T}from"./camera-8wkI6VD5.js";import{V as oe}from"./video-DKl5ez6t.js";import{B as se}from"./book-open-CqimO3US.js";import{S as ie}from"./search-Bv7nWCFj.js";import{P as ne}from"./plus-kwQ_QrJb.js";import{I as te}from"./image-B0DGh2HR.js";import{F as ae}from"./file-text-WktVSpFc.js";import{A as le}from"./arrow-left-right-CJFCZjJr.js";import{S as ce}from"./send-CTAVv_ir.js";import{M as de}from"./mic-rpMutp9Z.js";import"./square-bBbdZ8yP.js";import"./useVoiceRecognition-BNsGH1T3.js";import"./VoiceRecognitionService-DDVTm04u.js";import"./keyboard-iw5dbNtd.js";import"./folder-open-WDpSC539.js";import"./play-B08f1lLf.js";import"./QuickPhraseService-c5svCMlT.js";import"./ListItemButton-BZRzgQUG.js";import"./check-CEUQC_40.js";import"./index-CksWMXrD.js";import"./file-Bjc9Q6de.js";import"./InputAdornment-2unSRdg3.js";import"./chevron-left-DTk8olC6.js";const pe=({availableButtons:b,leftButtons:l,rightButtons:n,onUpdateLayout:t})=>{const x=E.useMemo(()=>{const o=new Map;return b.forEach(i=>{o.set(i.id,i)}),o},[b]),m=b.filter(o=>!l.includes(o.id)&&!n.includes(o.id)),j=A.useCallback(o=>{const i=l.includes(o),r=n.includes(o);if(i||r){const a=l.filter(d=>d!==o),s=n.filter(d=>d!==o);t(a,s)}else t([...l,o],n)},[l,n,t]),y=A.useCallback(o=>{if(!o.destination)return;const{source:i,destination:r,draggableId:a}=o;if(i.droppableId===r.droppableId){if(i.droppableId==="left-buttons"){const s=Array.from(l);s.splice(i.index,1),s.splice(r.index,0,a),t(s,n)}else if(i.droppableId==="right-buttons"){const s=Array.from(n);s.splice(i.index,1),s.splice(r.index,0,a),t(l,s)}}else if(i.droppableId==="left-buttons"&&r.droppableId==="right-buttons"){const s=l.filter(g=>g!==a),d=Array.from(n);d.splice(r.index,0,a),t(s,d)}else if(i.droppableId==="right-buttons"&&r.droppableId==="left-buttons"){const s=n.filter(g=>g!==a),d=Array.from(l);d.splice(r.index,0,a),t(d,s)}else if(i.droppableId==="unused-buttons"){if(r.droppableId==="left-buttons"){const s=Array.from(l);s.splice(r.index,0,a),t(s,n)}else if(r.droppableId==="right-buttons"){const s=Array.from(n);s.splice(r.index,0,a),t(l,s)}}else if(r.droppableId==="unused-buttons"){if(i.droppableId==="left-buttons"){const s=l.filter(d=>d!==a);t(s,n)}else if(i.droppableId==="right-buttons"){const s=n.filter(d=>d!==a);t(l,s)}}},[l,n,t]),f=(o,i,r)=>{const a=o.icon;return e.jsx(X,{draggableId:o.id,index:i,children:(s,d)=>e.jsxs(F,{ref:s.innerRef,...s.draggableProps,...s.dragHandleProps,sx:{mb:1,bgcolor:d.isDragging?"primary.light":"background.paper",borderRadius:1,border:"1px solid",borderColor:d.isDragging?"primary.main":"divider",transform:d.isDragging?"rotate(2deg)":"none",transition:"all 0.2s ease",opacity:r?1:.6,cursor:"grab","&:active":{cursor:"grabbing"},"&:hover":{borderColor:"primary.main",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}},children:[e.jsx(S,{sx:{minWidth:40},children:e.jsx(Z,{size:16,color:"rgba(0,0,0,0.4)"})}),e.jsx(S,{sx:{minWidth:40},children:e.jsx(a,{size:20,color:o.color})}),e.jsx(L,{primary:e.jsx(c,{variant:"body1",sx:{fontWeight:500},children:o.label}),secondary:o.description,sx:{flex:1}}),e.jsx(P,{edge:"end",onClick:g=>{g.stopPropagation(),g.preventDefault(),j(o.id)},sx:{color:r?"primary.main":"text.disabled",ml:1,"&:hover":{bgcolor:r?"primary.light":"action.hover"}},children:r?e.jsx(G,{size:18}):e.jsx(_,{size:18})})]})},o.id)};return e.jsxs(Q,{onDragEnd:y,children:[e.jsxs(p,{sx:{display:"flex",gap:3,flexDirection:{xs:"column",md:"row"}},children:[e.jsxs(p,{sx:{flex:1},children:[e.jsxs(c,{variant:"subtitle1",sx:{mb:2,display:"flex",alignItems:"center"},children:["左侧按钮",e.jsxs(c,{variant:"caption",color:"text.secondary",sx:{ml:1},children:["(",l.length," 个)"]})]}),e.jsx(u,{sx:{p:1,minHeight:200,backgroundColor:"rgba(25, 118, 210, 0.02)"},children:e.jsx(w,{droppableId:"left-buttons",children:o=>e.jsxs(I,{ref:o.innerRef,...o.droppableProps,sx:{minHeight:150},children:[l.map((i,r)=>{const a=x.get(i);return a?f(a,r,!0):null}),o.placeholder,l.length===0&&e.jsx(c,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:4},children:"拖拽按钮到这里"})]})})})]}),e.jsxs(p,{sx:{flex:1},children:[e.jsxs(c,{variant:"subtitle1",sx:{mb:2,display:"flex",alignItems:"center"},children:["右侧按钮",e.jsxs(c,{variant:"caption",color:"text.secondary",sx:{ml:1},children:["(",n.length," 个)"]})]}),e.jsx(u,{sx:{p:1,minHeight:200,backgroundColor:"rgba(76, 175, 80, 0.02)"},children:e.jsx(w,{droppableId:"right-buttons",children:o=>e.jsxs(I,{ref:o.innerRef,...o.droppableProps,sx:{minHeight:150},children:[n.map((i,r)=>{const a=x.get(i);return a?f(a,r,!0):null}),o.placeholder,n.length===0&&e.jsx(c,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:4},children:"拖拽按钮到这里"})]})})})]})]}),e.jsxs(p,{sx:{mt:3},children:[e.jsxs(c,{variant:"subtitle1",sx:{mb:2},children:["可用按钮 (",m.length," 个)"]}),e.jsx(c,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"拖拽按钮到上方左右区域来使用，或拖拽已使用的按钮回到这里来移除"}),e.jsx(u,{sx:{p:1,minHeight:100,backgroundColor:"rgba(158, 158, 158, 0.02)"},children:e.jsx(w,{droppableId:"unused-buttons",children:(o,i)=>e.jsxs(I,{ref:o.innerRef,...o.droppableProps,sx:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:1,minHeight:80,backgroundColor:i.isDraggingOver?"rgba(158, 158, 158, 0.1)":"transparent",borderRadius:1,transition:"background-color 0.2s ease"},children:[m.map((r,a)=>f(r,a,!1)),o.placeholder,m.length===0&&e.jsx(c,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:4,gridColumn:"1 / -1",fontStyle:"italic"},children:i.isDraggingOver?"松开鼠标移除按钮":"所有按钮都已使用，拖拽按钮到这里可以移除"})]})})})]})]})},xe=[{id:"tools",label:"扩展",icon:()=>e.jsx(C,{name:"settingsPanel",size:20}),description:"启用/禁用扩展功能",color:"#4CAF50"},{id:"mcp-tools",label:"工具",icon:V,description:"启用/禁用MCP工具功能",color:"#4CAF50"},{id:"clear",label:"清空内容",icon:q,description:"清空当前话题内容",color:"currentColor"},{id:"image",label:"生成图片",icon:T,description:"切换图片生成模式",color:"#9C27B0"},{id:"video",label:"生成视频",icon:oe,description:"切换视频生成模式",color:"#E91E63"},{id:"knowledge",label:"知识库",icon:se,description:"访问知识库功能",color:"#059669"},{id:"search",label:"网络搜索",icon:ie,description:"启用网络搜索功能",color:"#3B82F6"},{id:"upload",label:"添加内容",icon:ne,description:"添加图片、文件或使用其他功能",color:"#F59E0B"},{id:"camera",label:"拍摄照片",icon:T,description:"使用相机拍摄照片",color:"#9C27B0"},{id:"photo-select",label:"选择图片",icon:te,description:"从相册选择图片",color:"#1976D2"},{id:"file-upload",label:"上传文件",icon:ae,description:"上传文档或其他文件",color:"#4CAF50"},{id:"ai-debate",label:"AI辩论",icon:()=>e.jsx(C,{name:"aiDebate",size:20}),description:"开始多AI角色辩论",color:"#2196F3"},{id:"quick-phrase",label:"快捷短语",icon:()=>e.jsx(C,{name:"quickPhrase",size:20}),description:"插入预设的文本短语",color:"#9C27B0"},{id:"multi-model",label:"多模型发送",icon:le,description:"同时向多个AI模型发送消息",color:"currentColor"},{id:"send",label:"发送按钮",icon:ce,description:"发送消息按钮",color:"currentColor"},{id:"voice",label:"语音按钮",icon:de,description:"语音输入按钮",color:"currentColor"}],be=({inputLayoutStyle:b})=>{const l=J(),n=K(l.breakpoints.down("sm")),t={onSendMessage:()=>{},onSendImagePrompt:()=>{},isLoading:!1,allowConsecutiveMessages:!0,imageGenerationMode:!1,videoGenerationMode:!1,webSearchActive:!1,onStopResponse:()=>{},isStreaming:!1,isDebating:!1,toolsEnabled:!0,availableModels:[],onClearTopic:()=>{},onNewTopic:()=>{},toggleImageGenerationMode:()=>{},toggleVideoGenerationMode:()=>{},toggleWebSearch:()=>{},toggleToolsEnabled:()=>{},onToolsEnabledChange:()=>{}},x=()=>{switch(b){case"compact":return e.jsx(re,{...t});case"integrated":return e.jsx(ee,{...t});default:return e.jsxs(p,{children:[e.jsx($,{...t}),e.jsx(p,{sx:{mt:1},children:e.jsx(U,{onClearTopic:t.onClearTopic,toggleImageGenerationMode:t.toggleImageGenerationMode,toggleWebSearch:t.toggleWebSearch,onToolsEnabledChange:t.onToolsEnabledChange,imageGenerationMode:!1,webSearchActive:!1,toolsEnabled:!0})})]})}};return e.jsxs(p,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:3,bgcolor:l.palette.mode==="dark"?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.02)",borderRadius:2,minHeight:"120px",justifyContent:"center",position:"relative",overflow:"hidden"},children:[e.jsx(c,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"实时预览效果"}),e.jsx(p,{sx:{width:"100%",maxWidth:n?"100%":"600px",transform:"scale(1)",transformOrigin:"center"},children:x()})]})},Ve=()=>{const b=W(),l=z(),n=B(r=>r.settings),t=n.inputBoxStyle||"default",x=n.inputLayoutStyle||"default",m=n.integratedInputLeftButtons||["tools","clear","search"],j=n.integratedInputRightButtons||["voice","send"],y=()=>{b("/settings/appearance")},f=r=>{l(v({inputBoxStyle:r.target.value}))},o=r=>{l(v({inputLayoutStyle:r.target.value}))},i=(r,a)=>{l(v({integratedInputLeftButtons:r,integratedInputRightButtons:a,integratedInputButtons:[...r,...a]}))};return e.jsxs(p,{sx:{flexGrow:1,display:"flex",flexDirection:"column",height:"100vh",bgcolor:r=>r.palette.mode==="light"?k(r.palette.primary.main,.02):k(r.palette.background.default,.9)},children:[e.jsx(H,{position:"fixed",elevation:0,sx:{zIndex:r=>r.zIndex.drawer+1,bgcolor:"background.paper",color:"text.primary",borderBottom:1,borderColor:"divider",backdropFilter:"blur(8px)"},children:e.jsxs(O,{children:[e.jsx(P,{edge:"start",color:"inherit",onClick:y,"aria-label":"back",sx:{color:r=>r.palette.primary.main},children:e.jsx(N,{size:20})}),e.jsx(c,{variant:"h6",component:"div",sx:{flexGrow:1,fontWeight:600,backgroundImage:"linear-gradient(90deg, #9333EA, #754AB4)",backgroundClip:"text",color:"transparent"},children:"输入框管理设置"})]})}),e.jsxs(p,{sx:{flexGrow:1,overflowY:"auto",p:{xs:1,sm:2},mt:8,"&::-webkit-scrollbar":{width:{xs:"4px",sm:"6px"}},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0,0,0,0.1)",borderRadius:"3px"}},children:[e.jsxs(u,{elevation:0,sx:{p:2,mb:3,border:"1px solid #eee"},children:[e.jsx(c,{variant:"subtitle1",sx:{mb:2},children:"实时预览"}),e.jsx(be,{inputBoxStyle:t,inputLayoutStyle:x}),e.jsxs(c,{variant:"body2",color:"text.secondary",sx:{mt:2,textAlign:"center"},children:["当前配置：",t==="default"?"默认风格":t==="modern"?"现代风格":"简约风格"," + ",x==="default"?"默认样式":x==="compact"?"聚合样式":"集成样式"]}),x==="integrated"&&e.jsxs(p,{sx:{mt:3,pt:3,borderTop:"1px solid #eee"},children:[e.jsx(c,{variant:"subtitle1",sx:{mb:2},children:"自定义输入框按钮布局"}),e.jsx(c,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"拖拽按钮来自定义左右布局，点击眼睛图标来显示/隐藏按钮。配置后可在上方预览中查看效果："}),e.jsx(pe,{availableButtons:xe,leftButtons:m,rightButtons:j,onUpdateLayout:i}),e.jsxs(c,{variant:"body2",color:"text.secondary",sx:{mt:2},children:["左侧 ",m.length," 个按钮，右侧 ",j.length," 个按钮。 按钮将按配置的左右布局显示在输入框底部。"]})]})]}),e.jsx(Y,{sx:{mb:3}}),e.jsxs(u,{elevation:0,sx:{p:2,mb:3,border:"1px solid #eee"},children:[e.jsx(c,{variant:"subtitle1",sx:{mb:2},children:"输入框风格"}),e.jsxs(D,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[e.jsx(R,{children:"输入框风格"}),e.jsxs(M,{value:t,onChange:f,label:"输入框风格",MenuProps:{disableAutoFocus:!0,disableRestoreFocus:!0},children:[e.jsx(h,{value:"default",children:"默认风格"}),e.jsx(h,{value:"modern",children:"现代风格"}),e.jsx(h,{value:"minimal",children:"简约风格"})]})]}),e.jsxs(c,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["选择聊天输入框和工具栏的视觉风格：",e.jsx("br",{}),"• ",e.jsx("strong",{children:"默认风格"}),"：标准圆角，适中阴影，经典外观",e.jsx("br",{}),"• ",e.jsx("strong",{children:"现代风格"}),"：更圆润的边角，立体阴影，毛玻璃背景效果",e.jsx("br",{}),"• ",e.jsx("strong",{children:"简约风格"}),"：尖锐边角，无阴影，清爽简洁"]})]}),e.jsxs(u,{elevation:0,sx:{p:2,mb:3,border:"1px solid #eee"},children:[e.jsx(c,{variant:"subtitle1",sx:{mb:2},children:"输入框布局样式"}),e.jsxs(D,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[e.jsx(R,{children:"布局样式"}),e.jsxs(M,{value:x,onChange:o,label:"布局样式",MenuProps:{disableAutoFocus:!0,disableRestoreFocus:!0},children:[e.jsx(h,{value:"default",children:"默认样式（工具栏+输入框分离）"}),e.jsx(h,{value:"compact",children:"聚合样式（输入框+功能图标集成）"}),e.jsx(h,{value:"integrated",children:"集成样式（工具菜单+垂直布局）"})]})]}),e.jsxs(c,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["选择聊天输入区域的布局方式：",e.jsx("br",{}),"• 默认样式：工具栏和输入框分别显示，功能清晰分离",e.jsx("br",{}),"• 聚合样式：输入框上方，下方为功能图标行，点击+号可展开更多功能",e.jsx("br",{}),"• 集成样式：工具菜单集成到输入框，采用垂直布局和现代化设计"]})]}),e.jsx(p,{sx:{height:"20px"}})]})]})};export{Ve as default};
