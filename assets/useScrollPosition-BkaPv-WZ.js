import{r as t,l as d}from"./index-BFQp9Otg.js";function C(m,p={}){const{throttleTime:u=100,autoRestore:a=!0,restoreDelay:i=50,onScroll:f}=p,o=t.useRef(null),e=`scroll:${m}`,c=t.useCallback(r=>{try{localStorage.setItem(e,r.toString())}catch(h){console.error("保存滚动位置失败:",h)}},[e]),l=t.useCallback(()=>{try{const r=localStorage.getItem(e);return r?parseInt(r,10):0}catch(r){return console.error("获取滚动位置失败:",r),0}},[e]),s=t.useCallback(d.throttle(()=>{if(!o.current)return;const r=o.current.scrollTop;window.requestAnimationFrame(()=>{c(r)}),f?.(r)},u),[c,u,f]),n=t.useCallback(()=>{if(!o.current)return;const r=l();o.current.scrollTop=r},[l]),T=t.useCallback(()=>{o.current&&window.requestAnimationFrame(()=>{o.current&&o.current.scrollTo({top:o.current.scrollHeight,behavior:"auto"})})},[]),S=t.useCallback(()=>{o.current&&(o.current.scrollTop=0)},[]),b=t.useCallback(r=>{o.current&&(o.current.scrollTop=r)},[]);return t.useEffect(()=>{if(a){const r=setTimeout(n,i);return()=>clearTimeout(r)}},[a,n,i]),t.useEffect(()=>()=>{s.cancel()},[s]),{containerRef:o,handleScroll:s,scrollToBottom:T,scrollToTop:S,scrollToPosition:b,restoreScrollPosition:n,saveScrollPosition:c,getSavedScrollPosition:l}}export{C as u};
